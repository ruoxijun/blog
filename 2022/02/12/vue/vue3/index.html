<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Vue3 | ruoxijun</title><meta name="keywords" content="axios,vue3,es6,vuex,webpack,npm,vueRouter"><meta name="author" content="ruoxijun,1460662245@qq.com"><meta name="copyright" content="ruoxijun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Vue3"><meta name="application-name" content="Vue3"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Vue3"><meta property="og:url" content="http://ruoxijun.top/2022/02/12/vue/vue3/index.html"><meta property="og:site_name" content="ruoxijun"><meta property="og:description" content="Vue3Npm  npm （全称 Node Package Manager，即node 包管理器）  Node.js 默认使用 npm 作为软件包管理系统（安装 nodejs 即会默认安装 npm）    1. npm(nodejs) 安装：安装： Node.js 下载地址 (nodejs.cn)"><meta property="og:locale" content="en"><meta property="og:image" content="https://www.ruoxijun.top/getRandomImageR2?_r_=6fd8dffc-5ad9-adcc-64a0-5e5f21497251"><meta property="article:author" content="ruoxijun"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.ruoxijun.top/getRandomImageR2?_r_=6fd8dffc-5ad9-adcc-64a0-5e5f21497251"><meta name="description" content="Vue3Npm  npm （全称 Node Package Manager，即node 包管理器）  Node.js 默认使用 npm 作为软件包管理系统（安装 nodejs 即会默认安装 npm）    1. npm(nodejs) 安装：安装： Node.js 下载地址 (nodejs.cn)"><link rel="shortcut icon" href="/images/favicon.svg"><link rel="canonical" href="http://ruoxijun.top/2022/02/12/vue/vue3/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b3a933e91b357919bc48b2dcf700920b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-7JZFCVWT7S"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-7JZFCVWT7S');
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;dddccd3510d7456c85b636b70477a196&quot;}"></script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "imlr52l3x8");</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'http://43.142.114.172:8080/',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: ruoxijun","link":"Link: ","source":"Source: ruoxijun","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'ruoxijun',
  title: 'Vue3',
  postAI: '',
  pageFillDescription: 'Vue3, Npm, 1. npm(nodejs) 安装：, 安装：, npm 配置修改：, 常用命令：, 2. Package.json：, Webpack, 1. 概念：, 2. 安装与使用：, 打包 js 文件：, 3. 核心配置：, 1. 配置选项：, 2. 多入口多出口：, 3. 打包 HTML 文件：, 4. 打包 CSS 文件：, 5. 打包图片、字体图标eslint js语法检查(略)：, 6. DevServer：, 7. 去除无用的 js、css (略)：, ES6 语法, 1. let、const ：, 2. 箭头函数与 this 指向：, 3. 数组方法：, 4. Module 模块化：, 1. main.html 中引入主 main.js ：, 2. export 和 import ：, Axios, 1. ES6 Promise：, 2. 简单使用, 3. 全局配置与封装：, 4. 拦截器：, Vue3, 1. 初识 vue3, 2. vue-cli：, 1. 命令须知：, 2. 项目创建：, 3. vue.config.js, 3. Vue3 语法：, 1. 基础语法：, 2. v-bind：, 3. computed：, 4. v-on：, 5. v-for：, 6. v-model：, 7. watch, 8. Teleport：, 9. component：, 4. 组件化开发：, 1. 创建组件：, 2. 引用组件：, 3. props（父传子）：, 4. $emit（子传父）：, 5. 父子间直接访问：, 6. slot 插槽：, 7. keep-alive：, 8. 组件生命周期函数：, 1. 组件生命周期图：, 2. 组件生命周期方法：, 3. $nexTick ：, Axios 与 Vue, 1. Vue 中使用 Axios：, 2. Vue 封装 Axios 模板：, VueRouter, 1. 认识路由：, 1. 基础使用：, 2. 路由模式：, 3. 重定向与别名：, 2. router-link：, 3. 嵌套路由：, 4. 动态路由与参数传递：, 1. params 与 query 传参：, 2. props 传参：, 5. 导航守卫：, 1. 全局守卫：, 2. 路由守卫：, 3. 组件守卫：, 4. 导航流程：, 6. keep-alive 与 transition：, Vuex, 1. 认识 Vuex：, 工作原理：, 引入方式：, 2.核心概念：, 1. State（状态）：, 2. Mutation（改变）, 3. Getter（属性）, 4. Action（异步）, 5. Module（模块）, Composition API, 1. setup：, 2. 常用 API：, 3. watch 与 watchEffect：, 4. 生命周期：, nextTick：, 5. provide 与 inject：, 1. 选项式 API：, 2. 组合式 API：, 6. VueRouter：, 7. Vuex：, Vite + TS, 创建项目：, Ref 全家桶：, Reactive 全家桶：, To 全家桶：, computed：, less：, 组件传值：, 父传子：, 子传父：, 暴露组件属性：, 递归组件：, v-model, 动态组件：, 使用方式：, 异步组件：, transition：, 基础使用：, animate.css：, 生命周期：, appear：, TransitionGroup：, gsap.js：, Mitt, unplugin-auto-import：, 自定义指令, Hooks：, Mixins, Hooks：, 定义全局变量：, vue2：, vue3：, 样式穿透：, Pinia, 安装使用：, state, 1. 直接修改：, 2. $patch（推荐）：, 3. $state：, 4. actions（推荐）：, 5. storeToRefs：, getters、actions：, API：, $reset：, $subscribe：, $onAction：, 持久化存储：全称即包管理器默认使用作为软件包管理系统安装即会默认安装安装安装下载地址下载安装安装过程直接默认下一步即可配置修改安装淘宝镜像不建议使用使用易出错使用淘宝镜像路径使用淘宝镜像路径推荐查看镜像配置依赖缓存位置修改或查看缓存或保存模块地址缓存地址全局模块地址注意由于全局模块大多需要命令访问因此应在系统环境变量中添加的全局模块保存地址常用命令查看版本检查是否安装成功查看版本更新与全局安装安装软件包命令在当前文件夹下安装这里以为例在后面加上表示全局安装如需指定版本软件名版本号且它会自动清理当前项目之前安装的版本使用你指定的版本表示开发环境使用查看全局安装的软件包去除查看当前文件夹项目下安装的所有软件包查看某个软件包的版本为当前项目生成文件可初始化项目配置命令运行文件配置中的命令根据文件与配置为项目安装软件包版本配置符号表示的大版本不会改变后面两位数的版本自动更新去除该符号则版本不会自动更新此外使用符号表示最后一位数版本自动更新配置当前项目的主入口文件一般默认为当前项目目录下的文件是一个模块打包器构建工具它主要目标是将文件打包在一起打包后的文件用于浏览器中使用其次它还能转换打包包裹任何资源默认只能打包文件对其它资源打包需要使用到插件官网概念树结构在一个入口文件中引入所有资源形成树状依赖关系模块对于来说所有的资源都称之为模块打包过程中被操作的模块文件被称之为最终打包完成的文件可能和一样大部分情况下它是多个的集合安装与使用安装软件包安装脚手架即命令行执行程序两个包同时安装命令不全局安装仅为当前项目安装开发环境打包文件在空项目中初始化创建目录与主文件中有介绍默认寻找目录下再根据需要创建其它的文件或者目录但必须以文件为主文件与其它文件相关联形成树状关系打包开发环境生产环境打包成功以后会在项目下生成目录目录中的就是打包成功后的文件核心配置在项目中新建默认会按此文件配置打包配置选项使用来定位项目目录所有的配置都是可选的以哪个文件作为入口开始打包默认打包后的资源输出到哪里以及如何命名打包后的文件名保存的目录配置处理非资源插件指示使用相应模式的配置开发生产多入口多出口为数组类型多个入口文件打包形成一个并最后输出一个文件打包后的文件名保存的目录为对象类型多个入口文件打包形成多个并最后输出多个文件如下生成对象的为文件名输出保存的目录混合模式对象中使用数组对象的为文件名输出保存的目录打包文件安装打包插件仅开发环境使用引入在中配置使用插件参数为空时默认将生成一个空的模板打包的在此文件的中引入打包多个可配置多个指定模板最后打包文件在此模板最后引入打包后的文件名此中需要引入的配置的移除空格移除注释打包文件安装和打包单个文件并处理和等外部资源在标签中插入标签并将打包的样式利用嵌入其中只是单纯打包文件可以忽略此插件安装命令在文件中引入配置文件中配置规则遵循从右到左从下到上因此注意的顺序打包图片字体图标语法检查略打包详解安装开启服务支持自动刷新需要在中内添加属性修改配置文件后需要重启服务修改访问端口除向像上方使用命令修改配置外也能在配置编译时压缩自动开启浏览器自动刷新默认是重新加载所有的文件开启热替换只重新加载修改的文件去除无用的略语法可以重复声明无法限制修改没有块级作用域不能重复声明拥有块级作用域与类似但仅作为常量使用箭头函数与指向箭头函数返回对象问题报错使用返回对象使用括号包裹对象普通函数指向它的调用者箭头函数指向它定义时所处位置的外层数组方法映射函数返回值为映射数组元素的值过滤函数返回值表示保留当前数组元素迭代器遍历汇总最后返回值为参指定函数参初始化值最后返回值为注意未指定参时循环次数少模块化注意模块化必须在服务器中使用本地无效可以使用直接点击浏览器图标即可中引入主和中集体导出中单个导出一个只能有一个可以在我们导入时自定义名字中指定导入重命名导入所有并都放入对象中必须使用否则为的导出导入的方法主要用于异步计算可以将异步操作队列化按照期望的顺序执行返回符合预期的结果可以在对象之间传递和操作帮助我们处理队列基本用法承诺解决拒绝然后抓住执行方法表示执行成功参数为你需要返回的值可以是任意类型方法执行完成作用同上作用同上表示执行错误与作用与类似会阻断方法的执行方法执行错误作用同上执行方法方法执行错误此处执行中返回的上面有错误发生并未处理时在此处统一处理并发处理执行完成执行完成执行完成执行完成简单使用中文文档中文官网在中搜索引入文件默认请求设置参数指定请求方式注意此参数是将值添加到路径中值存储在请求体中传递如果参数为字符串会拼接到中作为参数不支持并发请求处理与方法类似请求结果集中到数组返回将请求结果作为方法参数全局配置与封装全局配置请求路径前缀请求超时时间封装每一个都可以认为是一个单独的使用拦截器请求拦截器放行响应拦截器放行初识官网旧版最新文档官网创建实例与挂载元素创建实例与挂载元素访问属性可直接访问包括方法是官方提供的脚手架工具默认已经帮我们搭建好了一套利用管理的项目结构命令须知安装命令检查版本或创建项目项目名称卸载命令项目创建执行命令开始创建项目此处使用上下键加回车进行选择前两个选项表示创建默认的或项目默认创建的项目中包含两个插件检查转检查语法与修复第三个选项表示手动创建项目建议使用默认的项目结构手动创建项目选择后进入上界面通过上下键与空格选择或取消选择完成后回车进入下一步之后对项目以及插件进行配置操作如下如果最后对项目配置进行了保存删除当前用户文件夹文件中可以去除保存的配置当我们需要对或插件进行配置时只需要在项目的根路径下新建提供了方便的配置方法我们也可以选择使用原生的配置方法进行配置配置详情请参照设置项目编译后的文件夹提供的配置方法使用原生方法配置语法基础语法插值表达式注意只接受表达式不能使用语句简单指令指令不解析该标签中的语法该标签中的语法只解析一次向该标签中插入文本向改标签中插入不能在此直接书写是否显示该标签是否渲染该标签防止弱网络环境下渲染闪烁问题简单使用属性名主要对标签的属性进行绑定除此它还有一种简写的方式属性名绑定绑定的样式与原有的样式会根据先后顺序以及优先级关系覆盖如下宽被宽覆盖字体颜色背景绑定与的属性绑定都支持字符串数组对象常用方法插值方式方法返回计算属性使用方法会返回设置的值为方法是默认为计算属性的方法使用对象为属性添加方法计算属性只有在方法中的属性值发生改变时才会重新计算否则都将使用缓存的数据而普通方法看你在页面中调用了多少次则运行多少次绑定一个点击事件简写当调用事件方法时没有传入参数且声明方法时只有一个参数默认该参数的值就是事件对象当有多个参数且我们需要事件对象时作为参数它就代表了当前事件对象事件修饰符阻止事件冒泡当前事件由该元素本身触发时才执行事件捕获模式如点击事件触发且冒泡时会优先执行添加该修饰符的外层阻止默认事件事件只触发一次可以循环渲染标签循环数组循环对象对于循环的标签提供了一个唯一标识符属性当循环的数组或者对象改变时它会去对比这个值只重新渲染改变了的数据而不去影响未改变的数据增加渲染效率使用唯一标识符的循环在中优先级大于反之修饰符懒加载让绑定值默认转换为类型去除绑定值两端的空格单选框与多选框性别男男女女协议爱好这里就代表了它们的属性同时与绑定需要默认选中时将绑定的变量设置为你需要的即可单个时绑定的属性为值为表示它是否选中多个时绑定一个数组数组的值可以设置为需要默认选中的数组值标签使用上同理多选绑定数组即可属性监听监听中的变化监听中属性的变化触发方法初始化是否执行一次开启深度监听将内容传送到指定节点不受父级影响是否传送默认类注册组件组件名绑定组件名直接绑定组件直接绑定组件可以不需要组件化开发创建组件我在文件夹中创建了一个名为文件这是组件化开发一个组件的基本格式中的样式一般子组件也能使用表示此中的样式只允许当前组件中使用该组件中的子组件不能使用关于使用学习看这篇就够了思否引用组件在中引用使用组件以下两种方式均可使用当组件只有一个根节点时样式会作用到该根节点上推荐使用小写加横杠方式引入要使用的组件注册组件父传子数组定义组件属性在子组件中接收的父类消息定义属性方便父组件传递数据在父组件中将绑定到该属性上可以绑定任意值如字符串对象等对象定义组件属性并添加验证基础的类型检查和会通过任何类型验证给组件定义了一个属性多个可能的类型必填的字符串带有默认值的数字带有默认值的对象在时对象或数组默认值必须从一个工厂函数获取自定义验证函数这个值必须匹配下列字符串中的一个可以是如下类型也可以是一个自定义构造器使用检测子传父子组件无法直接改变接收到的数据可以通过向父组件传递数据方式通知父组件来改变数据官方建议强烈建议使用记录每个组件所触发的所有事件与属性类似在子组件中接收的父类数据不是必须的但是建议使用可以使用对象并添加验证为此组件定义了一个方法供父组件使用并向该方法返回数据可以为任意类型数据在父组件中该方法与子组件绑定并接收子组件返回的数据父子间直接访问在子组件中使用该属性可直接调用父组件的方法或属性直接访问根组件中的属性一般是中使用该属性访问子组件属性已弃用访问子组件属性或获取元素使用绑定子组件通过的值来访问指定的子组件作用在普通标签中时获取到的是标签元素与一同使用时时会返回循环的组件数组中为了效率需要给绑定一个函数处理参为循环得到的组件插槽基本使用缺省内容默认内容标签表示一个插槽当使用该组件未插入任何内容时会将标签中的内容作为默认内容显示具名插槽在子组件中为添加属性未添加属性的在父组件中使用标签写入要插入的内容指定要插入的插槽插入中简写方式等于不建议使用简写插入中表示没有属性值的插槽插入中当子组件中有多个插槽时插入的内容默认会插入所有没有属性值的插槽中不会插槽传值在子组件中使用定义属性绑定可以定义多个属性绑定任意值在父组件中给传递的属性定义一个接收的对象并使用插槽属性传递的值具名插槽同理插入中动态插槽通过切换属性值来动态切换插槽官方解释包裹动态组件时会缓存不活动的组件实例而不是销毁它们和相似是一个抽象组件它自身不会渲染一个元素也不会出现在组件的父组件链中当组件在内被切换时它的和生命周期钩子不会被调用取而代之的是和这会运用在的直接子节点及其所有子孙节点主要用于保留组件状态或避免重新渲染包含排除以英文逗号分隔的字符串标签名或组件名通过算法缓存指定个数内常用的组件正则表达式需使用数组需使用可以是字符串与正则表达式混合数组组件生命周期函数组件生命周期图组件生命周期方法实例刚刚被创建实例已经创建完成模板编译之前模板编译完成数据更新之前数据更新完成缓存的组件激活时缓存的组件停用时实例销毁之前实例销毁完成官方解释将回调推迟到下一个更新周期之后执行在更改了一些数据以等待更新后立即使用它操作更新后的例如在中还未创建完成这时我们可以使用写入即将对进行的操作等待更新创建完成后将执行该操作列如一个很大的数组做了很大的改动你需要更新完成之后做些什么这时你可以在数组操作完的下一句使用它会在改动且渲染完成后做出操作与中使用项目中安装在组件中直接使用在需要的组件中导入新建文件封装以下新建文件为例引入创建实例创建其它实例或实例配置等导出需要使用的实例或者方法等在组件中直接引入使用即可封装模板内容展示省略认识路由官网安装基础使用中使用路由参照创建路由项目下路由中导入组件方式打包时会将所有组件与路由打包到同一个中组件会将组件打包为单个文件实现懒加载推荐使用在中注册路由在中使用路由路由跳转地址与标签作用类似不建议使用标签路由视图展示当前所在路由对应激活的样式如当前在首页时展示此样式路由模式使用的值来作为路由且中会带有号历史模式借助实现切换模式历史模式模式默认重定向与别名别名当此路径有使用传参时别名也需要将参数带上传参下方有介绍重定向也可以使用路径方式函数返回一个对象函数参数就是传参下方有介绍为路由激活状态的设置指点激活样式重新打开一个网页到首页自定义路由方式与常用使用插槽方式替换标签访问新的页面并添加历史记录个人中心访问新页面并直接替换当前记录关于我们返回上一页面返回当前路由路径注意这里是不是使用命名视图了解可以为设置属性展示默认组件展示相应名称组件配置路由时使用对象没有对应命名视图时默认显示组件为的视图展示该组件嵌套路由路由中定义子路由重定向数组定义子路由相当于设置路径时默认显示的组件优先与重定向子路由路径不需要使用子路由这里是中需要写全路径注意父级路由不能设置属性动态路由与参数传递与传参路由定义定义路由名使用路由并传递参数版本方式不传参会报错子路由页面不传参不会报错子路由页面子路由页面子路由页面在对应组件中接收参数值参数接收方式参数接收方式传参将传递给路由组件在传参基础之上定义路由时添加属性值定义一个路径参数变量名为使用传参在此对应路由组件属性中定义一个与路径变量名同名的属性类接收此参数值保证名称与变量名一致导航守卫扩展路由原信息路由原信息可以存储任意信息首页全局守卫全局前置守卫准备跳转的路由当前路由参数支持但不建议使用路由路径完整路径包括参数重定向取消导航注意添加参数后必须由控制跳转将不起作用且不时也不能默认跳转下一页面全局解析守卫每次导航时都会触发全局后置钩子调转到的路由之前的路由导航是否成功不支持参数将页面标题更改为属性的值路由守卫路由守卫同一路由只有改变时不会触发也可以是函数数组组件守卫在渲染该组件的对应路由被验证前调用不能获取组件实例因为当守卫执行时组件实例还没被创建可以使用的参数方位实例仅可使用通过访问组件实例在当前路由改变但是该组件被复用时调用举例来说对于一个带有动态参数的路径在和之间跳转的时候在导航离开该组件的对应路由时调用导航流程导航被触发在失活的组件里调用守卫调用全局的守卫在重用的组件里调用守卫在路由配置里调用解析异步路由组件在被激活的组件里调用调用全局的守卫导航被确认调用全局的钩子触发更新调用守卫中传给的回调函数创建好的组件实例会作为回调函数的参数传入与时可以直接使用或包裹组件需使用下方式认识官网官网中文文档安装工作原理引入方式在目录下新建内容如下在中注册注册核心概念状态在的中可以存储记录任意属性值因此也被称之为的状态这里声明了一个那么属性值在组件中读取状态值访问状态中的属性已经注册在中的属性必须用访问改变组件中使用访问状态属性也可以直接修改属性值但并不推荐官方推荐我们使用搭配的方式来修改状态中默认会将作为第一个参数传入你的方法中参数来接收用户传入的数据官方称之为载荷并表示其应该是一个对象修改状态组件中使用来修改状态参数为在中需要被调用的方法名参数为你需要传递的参数值有多个值需要传递时使用对象或数组使用对象风格组件中使用属性指定方法名称参数值属性名可以自定义中注意接收到的参数值作为对象在参中属性中与中的计算属性类似默认会将分别传入参中可以使用参调用中的其它方法组件中使用进行访问传参技巧返回带参的函数调用时传入参数即可异步可以包含任意异步操作常用做异步请求之类操作参数是上下文对象基本使用与中类似除参不同解构大概有这几个属性访问状态依然推荐使用方式修改数据访问属性调用中的其它方法组件中使用调用方法使用大致与类似它的参也用来接收参数同样支持对象风格的中还包含了和两个属性这是在下面模块中需要用到的模块允许我们将分割成模块每个模块拥有自己的甚至是嵌套子模块子模块状态注册一个子模块与组件类似子模块的需要使用函数封装组件中访问方式默认情况下模块内部的仍然是注册在全局命名空间的这样使得多个模块能够对同一个作出响应默认全局注册只能访问子模块状态默认子模块中的只能访问子模块的状态只能访问模块的访问根模块的状态访问根模块的组件访问方式默认全局访问根组件的状态属性参中除根节点介绍过的属性外还有来访问根节点组件访问方式默认全局嵌套子模块命名空间默认是与根模块整合的同名属性根模块优先如果希望你的模块具有更高的封装度和复用性你可以通过添加的方式使其成为带命名空间的模块开启命名空间嵌套子模块继承父模块的命名空间进一步嵌套命名空间访问方式自带命名空间模块化编程将抽取出来形成单独的文件使用导出并在主文件导入核心概念不需要的后缀模块可以根据不同的模块来细分状态函数是一个新的组件选项作为组件中组合式的入口函数在生命周期钩子执行之前执行实例还没生成没有有两个可选参数与是访问组件属性值的对象包含个属性父组件中实例组件中访问组件访问组件标签属性定义的属性无法访问拿到具名插槽内容对象默认插槽对象向父组件传递数据在之后的能显式地限制该组件暴露出的当父组件通过模板访问该组件的实例时将仅能访问函数暴露出的内容发返回值为一个对象该对象中的属性值是暴露给组件访问的属性值只有是创建的响应式对象才能够像中的属性一样响应式的改变常用都必须导入才能使用基本类型为单个数据提供响应式代理定义的对象在中必须使用访问或修改视图中可以直接访问只能为对象或数组提供响应式代理正常使用从对象响应式数据中提取单个数据作为响应式数据或改变双方都会发生改变对象响应式数据转普通对象但属性只修改为响应式数据为响应式数据响应式数据类型转普通数据类型判断某属性是否是响应式对象定义方法计算属性返回一个不可修改的只有添加方法后该属性可以修改计算属性返回的是一个对象返回原生数据是无法响应式的改变的响应式数据对象类型响应式数据响应式对象解构为单个的响应式数据与中方法一样暴露计算属性与监听属性值变化监听属性方法同样需要导入如下两方法初始时都会默认执行一次且当方法内的某个属性发生改变时就会执行一次只能默认监听方法中使用到的数据变化局限性大回调函数在上面代码之前执行可选配置参数与相同返回的函数执行将停止监听指定监听参数指定要监听的响应式数据参数监听方法监听的新值旧值默认初始化时为参数为监听配置对象指定监听后默认初始化是不会执行一次的为时可以使监听方法初始化时执行一次监听数据变化注意这里不需要使用变化无影响参数中的默认为监听多个属性时使用数组监听方法中第一个数组为新值第二个数组为旧值监听对象响应式数据的某个属性或想监听响应式数据的时需要使用函数方式返回监听和的变化监听整个对象则无需使用函数方式如果监听且是深层次对象时需要配置开启深层次监听而默认开启且对象引用类型属性值监听它的都一样开启深层次监听默认组件更新前调用同步执行更新之后生命周期注意使用以下生命周期也需要导入如选项式创建之前创建完成更新之前更新完成卸载销毁之前卸载完成缓存的组件激活缓存的组件停用当选项与组合式生命周期同时存在时会先执行中的也就是先执行组合式生命周期方法在中使用代替同步调用与是让父组件给子组件提供数据访问的一种方式使多层子组件如孙子组件下依然可以访问到父组件的属性值选项式如中提供属性在第层的子组件中与类似接收的数据不是响应式的中无变化注入父组件的属性或访问组合式中引入将提供出去多个数据使用多个方法子组件中引入注入参数二可设置默认值需要注入多个使用多个组合式使用注入的父属性是响应式的即我们在这里修改的值父组件也会相应改变和组合式与在中无法直接访问因此提供了和函数注意必须在最外层获取路由对象当前路由对象全局路由对象监听路由参数变化导航守卫函数注意包括的等方法获取对象必须在中的最外层如果在方法中使用会是组合式对于提供了函数为了访问和需要创建引用以保留响应性这与在选项式中创建计算属性等效引入必须在最外层获取对象在函数中访问在函数中访问创建项目官网地址创建项目创建项目全家桶当值是一个复杂类型时使用指定类型判断是否是对象获取元素值与变量名保持一致因为此时还未被渲染因此获取不到与只支持浅层次数据响应注意底层有调用如同一方法中同时更改与的值时视图也会被更新实际值改变但页面视图不会更新强制更新视图更新全家桶与与一样可指定类型只读但它会收原始对象的的影响如修改时它的值也改变它与类似提供浅层数据响应且会被与影响每次对或者的更改都会将所有的组件模板渲染更新为最新数据视图无变化视图更新全家桶将响应式对象属性提取为提取响应式对象的某个为值同时改变值同时改变将响应式对象的每个属性都转为对象并解构为响应式对象生成一个普通对象计算属性当属性值变化时的值改变安装到开发环境在标签上添加组件传值父传子非值可以直接在模板中使用也提供了设置默认值的方式默认值如果是复杂类型需要使用函数返回方式子传父父组件中定义接收参数的方法绑定子组件的传参事件子组件中定义组件传参事件名方式定义向指定事件传递参数传参值可多个参数暴露组件属性子组件中暴露组件的属性父组件中获取使用组件中的属性递归组件使用递归组件引入递归组件定义递归数据类型递归数据使用递归组件并传入递归数据实现递归组件当前组件递归停止递归条件递归数据类型接收递归数据默认使用文件名作为组件名可选链操作符报错只针对父组件中父组件开关子组件中关闭默认为接收接收默认类型需要断言为才能获取到值自定义修饰符默认为接收接收后面的名字自定义修饰符名组件上组件内有使用修饰符值为动态组件使用方式对象方式实现动态组件如果使用或者包装组件会代理组件属性监听变化而这会耗费性能且会在控制台给出警告因此建议在对象中使用包裹组件而普通变量使用包裹组件不建议使用使用包裹字符串方式实现动态组件使用组件字符串名注册组件异步组件异步导入组件基础使用使用标签包裹需要添加动画的元素的值是定义动画的前缀定义动画显示进入之前过度曲线结束隐藏也支持指定动画的名安装官网在组件中引入使用新版中都需要添加类属性可以指定执行时间毫秒还可通过对象属性方式单独设置显示和隐藏的动画时间生命周期生命周期方法对应时期显示动画之前显示过度显示结束显示过度被打断隐藏动画之前隐藏过度隐藏结束隐藏过度被打断所有生命周期方法参数是动画元素对象而过度方法接收参数它是过度回调代表过度执行完成默认它在动画结束后自动执行过度完成页面初次加载效果只在页面初始化后执行一次为列表添加动画属性使用方式与大体一致默认不会给列表多包装一层可使用属性指定包装一层元素列表必须添加属性列表元素平移动画元素位置改变安装使用过度时间注意该属性名与显示动画的属性值名要相同中第一次加载文件时执行并将获取到的内容放入缓存中之后文件都是从缓存中获取因此获取的对象实例都是单例安装使用进行组件通信而推荐使用中全局挂载引入执行类型注册才能获得提示挂载全局组件中使用中自定义事件参数传递参数值可多个中监听事件回调函数接收参数监听所有事件回调函数参数是事件类型之后参数为接收的参数值删除某监听事件删除所有监听事件安装配置自动导入项声明文件位置不用在组件中直接使用等自定义指令自定义指令赋值函数方式是与同时触发相同行为的简写完整写法与生命周期在中常使用抽取公共属性中的属性会被组件中的同名属性覆盖中的生命周期函数会比组件中同名生命周期函数先执行不会覆盖名称可自定义中组件中使用引入数组属性自动注入组件中在中推荐使用使用函数导出与引入的方式名称可自定义中与组件中一样可引入属性在组件中引入使用定义全局变量中类型注册才能获得提示且编辑器不报错定义全局变量或函数组件中获取当前实例直接调用样式穿透中使用推荐使用插槽选择器全局选择器动态对象需要引号方式包裹安装使用官网地址安装在中注册引入引入创建注册在内如如如主要提交同步异步均可组件中使用直接修改推荐对象方式函数方式推荐此方式需要修改中的所有属性才能使用推荐在的中定义方法使用方法修改中的属性在组件中使用方法可以直接解构出中的属性但不具有响应式因此提供了中定义的方法可以使用调用中的属性或方法重置监听变化有属性值改变时触发参数可选表示组件销毁后依然执行此监听监听调用参数可选表示组件销毁后依然执行此监听持久化存储',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-14 10:28:59',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://ruoxijun.top/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="https://ruoxijun.top/" title="其它"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="其它"/><span class="back-menu-item-text">其它</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">ruoxijun</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> Article</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-box-archive"></use></svg><span> Tunnel</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shapes"></use></svg><span> Classification</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg><span> Label</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> Friend</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link"></use></svg><span> Friends account</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-artstation"></use></svg><span> Moments</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-envelope"></use></svg><span> Message board</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> My</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-music"></use></svg><span> Music Hall</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg><span> Chasing</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-images"></use></svg><span> Album Set</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fan"></use></svg><span> Conditioning</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg><span> About</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> Search</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://ruoxijun.pythonanywhere.com/download" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://ruoxijun.pythonanywhere.com/download"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://ruoxijun.pythonanywhere.com/download" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://ruoxijun.pythonanywhere.com/download"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/WebView/" style="font-size: 1.05rem;">WebView<sup>1</sup></a><a href="/tags/alertdialog/" style="font-size: 1.05rem;">alertdialog<sup>1</sup></a><a href="/tags/arduino/" style="font-size: 1.05rem;">arduino<sup>1</sup></a><a href="/tags/axios/" style="font-size: 1.05rem;">axios<sup>3</sup></a><a href="/tags/docker/" style="font-size: 1.05rem;">docker<sup>1</sup></a><a href="/tags/es6/" style="font-size: 1.05rem;">es6<sup>2</sup></a><a href="/tags/file/" style="font-size: 1.05rem;">file<sup>2</sup></a><a href="/tags/fragment/" style="font-size: 1.05rem;">fragment<sup>1</sup></a><a href="/tags/idea/" style="font-size: 1.05rem;">idea<sup>1</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>3</sup></a><a href="/tags/jdbc/" style="font-size: 1.05rem;">jdbc<sup>1</sup></a><a href="/tags/jquery/" style="font-size: 1.05rem;">jquery<sup>1</sup></a><a href="/tags/k8s/" style="font-size: 1.05rem;">k8s<sup>1</sup></a><a href="/tags/kubernetes/" style="font-size: 1.05rem;">kubernetes<sup>1</sup></a><a href="/tags/linux/" style="font-size: 1.05rem;">linux<sup>4</sup></a><a href="/tags/lombok/" style="font-size: 1.05rem;">lombok<sup>2</sup></a><a href="/tags/markdown/" style="font-size: 1.05rem;">markdown<sup>1</sup></a><a href="/tags/maven/" style="font-size: 1.05rem;">maven<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 1.05rem;">mysql<sup>1</sup></a><a href="/tags/nginx/" style="font-size: 1.05rem;">nginx<sup>1</sup></a><a href="/tags/nps/" style="font-size: 1.05rem;">nps<sup>1</sup></a><a href="/tags/pecyclerView/" style="font-size: 1.05rem;">pecyclerView<sup>1</sup></a><a href="/tags/popupwindow/" style="font-size: 1.05rem;">popupwindow<sup>1</sup></a><a href="/tags/progressBar/" style="font-size: 1.05rem;">progressBar<sup>1</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>1</sup></a><a href="/tags/scrollView/" style="font-size: 1.05rem;">scrollView<sup>1</sup></a><a href="/tags/sharedpreferences/" style="font-size: 1.05rem;">sharedpreferences<sup>1</sup></a><a href="/tags/sql/" style="font-size: 1.05rem;">sql<sup>1</sup></a><a href="/tags/sqlite/" style="font-size: 1.05rem;">sqlite<sup>1</sup></a><a href="/tags/tabLayout/" style="font-size: 1.05rem;">tabLayout<sup>1</sup></a><a href="/tags/termux/" style="font-size: 1.05rem;">termux<sup>1</sup></a><a href="/tags/toast/" style="font-size: 1.05rem;">toast<sup>1</sup></a><a href="/tags/typescript/" style="font-size: 1.05rem;">typescript<sup>1</sup></a><a href="/tags/viewpager/" style="font-size: 1.05rem;">viewpager<sup>1</sup></a><a href="/tags/vue3/" style="font-size: 1.05rem;">vue3<sup>2</sup></a><a href="/tags/wsl/" style="font-size: 1.05rem;">wsl<sup>1</sup></a><a href="/tags/zerotermux/" style="font-size: 1.05rem;">zerotermux<sup>1</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 1.05rem;">内网穿透<sup>1</sup></a><a href="/tags/%E7%89%A9%E8%81%94%E7%BD%91/" style="font-size: 1.05rem;">物联网<sup>1</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">面向对象<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">March 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">February 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">September 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">August 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">January 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">October 2020</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Vue/" itemprop="url">Vue</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/axios/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>axios</span></a><a class="article-meta__tags" href="/tags/vue3/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>vue3</span></a><a class="article-meta__tags" href="/tags/es6/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>es6</span></a><a class="article-meta__tags" href="/tags/vuex/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>vuex</span></a><a class="article-meta__tags" href="/tags/webpack/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>webpack</span></a><a class="article-meta__tags" href="/tags/npm/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>npm</span></a><a class="article-meta__tags" href="/tags/vueRouter/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>vueRouter</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Vue3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-02-12T09:20:00.000Z" title="Created 2022-02-12 17:20:00">2022-02-12</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-09-14T02:28:59.344Z" title="Updated 2024-09-14 10:28:59">2024-09-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">Word count:</span><span class="word-count" title="文章字数">18k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">Reading time:</span><span>79min</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Vue3"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">Post View:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/2022/02/12/vue/vue3/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://www.ruoxijun.top/getRandomImageR2?_r_=6fd8dffc-5ad9-adcc-64a0-5e5f21497251"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://ruoxijun.top/2022/02/12/vue/vue3/"><header><a class="post-meta-categories" href="/categories/Vue/" itemprop="url">Vue</a><a href="/tags/axios/" tabindex="-1" itemprop="url">axios</a><a href="/tags/vue3/" tabindex="-1" itemprop="url">vue3</a><a href="/tags/es6/" tabindex="-1" itemprop="url">es6</a><a href="/tags/vuex/" tabindex="-1" itemprop="url">vuex</a><a href="/tags/webpack/" tabindex="-1" itemprop="url">webpack</a><a href="/tags/npm/" tabindex="-1" itemprop="url">npm</a><a href="/tags/vueRouter/" tabindex="-1" itemprop="url">vueRouter</a><h1 id="CrawlerTitle" itemprop="name headline">Vue3</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">ruoxijun</span><time itemprop="dateCreated datePublished" datetime="2022-02-12T09:20:00.000Z" title="Created 2022-02-12 17:20:00">2022-02-12</time><time itemprop="dateCreated datePublished" datetime="2024-09-14T02:28:59.344Z" title="Updated 2024-09-14 10:28:59">2024-09-14</time></header><h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><h2 id="Npm"><a href="#Npm" class="headerlink" title="Npm"></a>Npm</h2><blockquote>
<ul>
<li><p>npm （全称 Node Package Manager，即node 包管理器）</p>
</li>
<li><p>Node.js 默认使用 npm 作为软件包管理系统（安装 nodejs 即会默认安装 npm）</p>
</li>
</ul>
</blockquote>
<h3 id="1-npm-nodejs-安装："><a href="#1-npm-nodejs-安装：" class="headerlink" title="1. npm(nodejs) 安装："></a>1. npm(nodejs) 安装：</h3><h4 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h4><ul>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/">Node.js 下载地址 (nodejs.cn)</a></li>
</ul>
<p>下载 nodejs 安装（安装过程直接默认下一步即可）。</p>
<h4 id="npm-配置修改："><a href="#npm-配置修改：" class="headerlink" title="npm 配置修改："></a>npm 配置修改：</h4><ul>
<li><code>npm install cnpm -g</code> ：安装 cnpm 淘宝镜像（不建议使用，使用易出错）</li>
<li><del><code>npm config set registry https://registry.npm.taobao.org/</code> ：npm 使用淘宝镜像路径</del></li>
<li><code>npm config set registry https://registry.npmmirror.com/</code> ：npm 使用淘宝镜像路径（<strong>推荐</strong>）</li>
<li><code>npm config get registry</code> ：查看镜像配置</li>
<li>npm 依赖缓存位置修改：<ul>
<li><code>npm get cache</code> 或 <code>npm get prefix</code> ：查看缓存或保存模块地址</li>
<li><code>npm config set cache &quot;E:\myfile\nodejs\data\node_cache&quot;</code> ：缓存地址</li>
<li><code>npm config set prefix &quot;E:\myfile\nodejs\data\node_global&quot;</code> ：全局模块地址<ul>
<li>注意由于 node 全局模块大多需要命令访问因此，应在系统环境变量 <strong>PATH</strong> 中添加 node 的全局模块保存地址。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="常用命令："><a href="#常用命令：" class="headerlink" title="常用命令："></a>常用命令：</h4><ul>
<li><p><code>node -v</code>： 查看 nodejs 版本(检查是否安装成功)</p>
</li>
<li><p><code>npm -v</code> ：查看 npm 版本</p>
</li>
<li><p><code>npm install npm -g</code> ：npm 更新与全局安装</p>
</li>
<li><p><code>npm install jquery</code> ：npm 安装软件包命令，在当前文件夹下安装（这里以jquery为例，在后面加上 -g 表示全局安装）</p>
<ul>
<li>如需指定版本 <code>npm install jquery@3.0.0 </code>（ ‘软件名@版本号’ ），且它会自动清理当前项目之前安装的版本使用你指定的版本</li>
<li><code>npm install bootstrap -save-dev</code> ：表示开发环境使用</li>
</ul>
</li>
<li><p><code>npm list -g</code> ：查看全局安装的软件包（去除 -g 查看当前文件夹项目下安装的所有软件包）</p>
</li>
<li><p><code>npm list jquery</code> ：查看某个软件包的版本</p>
</li>
</ul>
<h3 id="2-Package-json："><a href="#2-Package-json：" class="headerlink" title="2. Package.json："></a>2. Package.json：</h3><ul>
<li><code>npm init</code> ：为当前项目生成 package.json 文件（可初始化 npm 项目）</li>
<li><code>npm run 配置命令</code> ：运行 package.json 文件 scripts 配置中的命令</li>
<li><code>npm install</code> ：根据 package.json 文件 dependencies 与 devDependencies 配置为项目安装软件包</li>
<li><strong>“jquery”: “^3.0.0”</strong> ：版本配置 <strong>‘^’</strong> 符号表示 3 的大版本不会改变，后面两位数的版本自动更新。去除该符号则版本不会自动更新。此外使用 <strong>‘~’</strong> 符号表示最后一位数版本自动更新。</li>
<li><strong>“main”: “index.js”</strong> ：配置当前项目的主入口文件，一般默认为当前项目 <strong>src</strong> 目录下的 <strong>index.js</strong> 文件。</li>
</ul>
<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><blockquote>
<p>  webpack 是一个模块打包器（构建工具）。它主要目标是将 JavaScript 文件打包在一起，打包后的文件用于浏览器中使用，其次它还能 <strong>转换、打包、包裹</strong> 任何资源（默认只能打包 js 文件，对其它资源打包需要使用到插件）。</p>
</blockquote>
<p>webpack 官网：<a target="_blank" rel="noopener" href="https://webpack.js.org/">webpack</a></p>
<h3 id="1-概念："><a href="#1-概念：" class="headerlink" title="1. 概念："></a>1. 概念：</h3><ul>
<li>树结构：在一个入口文件中引入所有资源，形成树状依赖关系。</li>
<li>模块：对于 webpack 来说所有的资源都称之为模块（.js，.css…）</li>
<li>chunk：打包过程中被操作的模块文件被称之为 chunk。</li>
<li>bundel：最终打包完成的文件。可能和 chunk 一样，大部分情况下它是多个 chunk 的集合。</li>
</ul>
<h3 id="2-安装与使用："><a href="#2-安装与使用：" class="headerlink" title="2. 安装与使用："></a>2. 安装与使用：</h3><p><code>npm install webpack -g</code> ：安装 webpack 软件包。<br><code>npm install webpack-cli -g</code>：安装 webpack 脚手架，即命令行执行程序。</p>
<p><code>npm install webpack webpack-cli -g</code>：两个包同时安装命令。</p>
<p><code>npm i webpack webpack-cli -D</code>：不全局安装仅为当前项目安装（i -&gt; install，d -&gt; 开发环境）</p>
<h4 id="打包-js-文件："><a href="#打包-js-文件：" class="headerlink" title="打包 js 文件："></a>打包 js 文件：</h4><ol>
<li>在空项目中初始化 npm <code>npm init -y</code> 。</li>
<li>创建 <strong>src</strong> 目录与 <strong>index.js</strong> 主文件（npm 中有介绍默认寻找 src 目录下 index.js），再根据需要创建其它的 JS 文件或者目录，但必须以 .&#x2F;src&#x2F;index.js 文件为主文件与其它文件相关联形成树状关系。</li>
<li>打包 <code>webpack --mode=development</code> （开发环境），<code>webpack --mode=production</code> （生产环境）</li>
<li>打包成功以后会在项目下生成 <strong>dist</strong> 目录，目录中的 <strong>main.js</strong> 就是打包成功后的 JS 文件。</li>
</ol>
<h3 id="3-核心配置："><a href="#3-核心配置：" class="headerlink" title="3. 核心配置："></a>3. 核心配置：</h3><p>在 webpack 项目中新建 <strong>webpack.config.js</strong> （webpack 默认会按此文件配置打包）。</p>
<h4 id="1-配置选项："><a href="#1-配置选项：" class="headerlink" title="1. 配置选项："></a>1. 配置选项：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;resolve&#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>); <span class="comment">// 使用 nodejs 来定位项目目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有的配置都是可选的</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// 以哪个文件作为入口开始打包（默认 ./src/index.js）</span></span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 打包后的资源输出到哪里以及如何命名</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&quot;build.js&quot;</span>, <span class="comment">// 打包后的文件名</span></span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;build&#x27;</span>) <span class="comment">// 保存的目录</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 配置处理非 js 资源</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 插件</span></span><br><span class="line">    <span class="attr">plugins</span>: [],</span><br><span class="line">    <span class="comment">// 指示 webpack 使用相应模式的配置（development开发，production生产）</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>, </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-多入口多出口："><a href="#2-多入口多出口：" class="headerlink" title="2. 多入口多出口："></a>2. 多入口多出口：</h4><ul>
<li>entry 为数组类型：多个入口文件打包形成一个 chunk 并最后输出一个文件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entry</span>: [<span class="string">&#x27;./src/index.js&#x27;</span>,<span class="string">&#x27;./src/main.js&#x27;</span>],</span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;build.js&quot;</span>, <span class="comment">// 打包后的文件名</span></span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;build&#x27;</span>) <span class="comment">// 保存的目录</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>entry 为对象类型：多个入口文件打包形成多个 chunk 并最后输出多个文件（如下生成 one.js、two.js）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">one</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">two</span>: <span class="string">&#x27;./src/main.js&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;[name].js&quot;</span>, <span class="comment">// 对象的 key 为文件名输出</span></span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;build&#x27;</span>) <span class="comment">// 保存的目录</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>混合模式：对象中使用数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">one</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">two</span>: [<span class="string">&#x27;./src/index.js&#x27;</span>,<span class="string">&#x27;./src/main.js&#x27;</span>],</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;[name].js&quot;</span>, <span class="comment">// 对象的 key 为文件名输出</span></span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;build&#x27;</span>) <span class="comment">// 保存的目录</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="3-打包-HTML-文件："><a href="#3-打包-HTML-文件：" class="headerlink" title="3. 打包 HTML 文件："></a>3. 打包 HTML 文件：</h4><ul>
<li>安装打包插件（仅开发环境使用）： <code>npm i html-webpack-plugin -D</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>); <span class="comment">// 引入 html-webpack-plugin</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 module.exports 中配置 plugins</span></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 使用插件，参数为空时默认将生成一个空的模板 index.html 打包的 js/css 在此文件的 body 中引入</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title function_">htmlWebpackPlugin</span>(),</span><br><span class="line">    <span class="comment">// 打包多个 html 可配置多个</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title function_">htmlWebpackPlugin</span>(&#123;</span><br><span class="line">        <span class="comment">// 指定 html 模板最后打包 js/css 文件在此模板 body 最后引入</span></span><br><span class="line">        <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;main.html&#x27;</span>, <span class="comment">// 打包后的文件名</span></span><br><span class="line">        <span class="attr">chunks</span>: [<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;two&#x27;</span>], <span class="comment">// 此 html 中需要引入的 js,entry 配置的 key</span></span><br><span class="line">        <span class="attr">minify</span>: &#123;</span><br><span class="line">            <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>, <span class="comment">// 移除空格</span></span><br><span class="line">            <span class="attr">removeComments</span>: <span class="literal">true</span> <span class="comment">// 移除注释</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h4 id="4-打包-CSS-文件："><a href="#4-打包-CSS-文件：" class="headerlink" title="4. 打包 CSS 文件："></a>4. 打包 CSS 文件：</h4><p>安装 css-loader 和 style-loader ，css-loader 打包单个文件并处理 @import 和 URL 等外部资源。style-loader 在 head 标签中插入 style 标签并将打包的 css 样式利用 js 嵌入其中（只是单纯打包 css 文件可以忽略此插件）。</p>
<p>安装命令： <code>npm i css-loader style-loader -D</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./style.css&#x27;</span>); <span class="comment">// 在 js 文件中引入 css</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置文件中配置</span></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [&#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">// 规则</span></span><br><span class="line">        <span class="comment">// 遵循从右到左从下到上，因此注意&#x27;style-loader&#x27;,&#x27;css-loader&#x27;的顺序</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="5-打包图片、字体图标，eslint-js语法检查-略-："><a href="#5-打包图片、字体图标，eslint-js语法检查-略-：" class="headerlink" title="5. 打包图片、字体图标，eslint js语法检查(略)："></a>5. 打包图片、字体图标，eslint js语法检查(略)：</h4><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/355825312">webpack打包详解</a></p>
<h4 id="6-DevServer："><a href="#6-DevServer：" class="headerlink" title="6. DevServer："></a>6. DevServer：</h4><ul>
<li><p>安装： <code>npm i webpack-dev-server -D</code></p>
</li>
<li><p>开启服务： <code>webpack serve</code></p>
</li>
<li><p>webpack5 支持自动刷新需要在 webpack.config.js 中 module.exports 内添加属性（修改配置文件后需要重启服务）：</p>
</li>
</ul>
<p><code>target: &quot;web&quot;</code></p>
<ul>
<li><p>修改访问端口： <code>webpack serve --port 8081</code></p>
</li>
<li><p>除向像上方使用命令修改 devserver 配置外，也能在 webpack.config.js 配置：</p>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">devServer<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    port<span class="punctuation">:</span> <span class="number">8081</span><span class="punctuation">,</span></span><br><span class="line">    compress<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 编译时压缩</span></span><br><span class="line">    open<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 自动开启浏览器</span></span><br><span class="line">    <span class="comment">// 自动刷新默认是重新加载所有的文件，开启热替换只重新加载修改的文件</span></span><br><span class="line">    hot<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-去除无用的-js、css-略-："><a href="#7-去除无用的-js、css-略-：" class="headerlink" title="7. 去除无用的 js、css (略)："></a>7. 去除无用的 js、css (略)：</h4><h2 id="ES6-语法"><a href="#ES6-语法" class="headerlink" title="ES6 语法"></a>ES6 语法</h2><h3 id="1-let、const-："><a href="#1-let、const-：" class="headerlink" title="1. let、const ："></a>1. let、const ：</h3><p><code>var</code> ： 可以重复声明、无法限制修改、没有块级作用域。</p>
<p><code>let</code> ： 不能重复声明、拥有块级作用域。</p>
<p><code>const</code> ： 与 let 类似但仅作为常量使用。</p>
<h3 id="2-箭头函数与-this-指向："><a href="#2-箭头函数与-this-指向：" class="headerlink" title="2. 箭头函数与 this 指向："></a>2. 箭头函数与 this 指向：</h3><ol>
<li>箭头函数返回对象问题：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">o</span> = (<span class="params"></span>)=&gt;&#123;<span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,<span class="attr">num</span>:<span class="number">1</span>&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">o</span>()); <span class="comment">// 报错：VM387:1 Uncaught SyntaxError: Unexpected token &#x27;:&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">o</span> = (<span class="params"></span>)=&gt;&#123;<span class="keyword">return</span> &#123;<span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>&#125;&#125;; <span class="comment">// 使用 return 返回对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o); <span class="comment">// ()=&gt;&#123;return &#123;name:&#x27;hello&#x27;&#125;&#125;</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">o</span> = (<span class="params"></span>)=&gt;(&#123;<span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,<span class="attr">num</span>:<span class="number">1</span>&#125;); <span class="comment">// 使用括号包裹对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">o</span>()); <span class="comment">// &#123;name: &#x27;hello&#x27;, num: 1&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>普通函数 this 指向它的调用者。</li>
<li>箭头函数 this 指向它定义时所处位置的外层 this 。</li>
</ol>
<h3 id="3-数组方法："><a href="#3-数组方法：" class="headerlink" title="3. 数组方法："></a>3. 数组方法：</h3><p>map 映射： <code>arr.map(function(values,index,array)&#123;&#125;)</code> 函数返回值为映射数组元素的值。</p>
<p>filter 过滤： <code>arr.filter(function(values)&#123;&#125;)</code> 函数返回值 true 表示保留当前数组元素。</p>
<p>forEach ： <code>arr.forEach(function(values)&#123;&#125;)</code> 迭代器遍历。</p>
<p>reduce 汇总：<code>arr.reduce((newValue,nextValue,index)=&gt;&#123;&#125;,?initialValue)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">newValue,nextValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,nextValue); <span class="comment">// 0 2, 2 3, 5 4, 最后返回值为 9</span></span><br><span class="line">    <span class="keyword">return</span> newValue+nextValue;</span><br><span class="line">&#125;, <span class="number">0</span>); <span class="comment">// 参2 指定 函数参1 初始化值</span></span><br><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">newValue,nextValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,nextValue); <span class="comment">// 2 3, 5 4, 最后返回值为 9</span></span><br><span class="line">    <span class="keyword">return</span> newValue+nextValue;</span><br><span class="line">&#125;); <span class="comment">// 注意 未指定参2 时循环次数少 1</span></span><br></pre></td></tr></table></figure>

<h3 id="4-Module-模块化："><a href="#4-Module-模块化：" class="headerlink" title="4. Module 模块化："></a>4. Module 模块化：</h3><p>注意模块化必须在服务器中使用，本地无效。vscode 可以使用 <strong>Live Server</strong> ，idea 直接点击浏览器图标即可。</p>
<h4 id="1-main-html-中引入主-main-js-："><a href="#1-main-html-中引入主-main-js-：" class="headerlink" title="1. main.html 中引入主 main.js ："></a>1. main.html 中引入主 main.js ：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;main.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-export-和-import-："><a href="#2-export-和-import-：" class="headerlink" title="2. export 和 import ："></a>2. export 和 import ：</h4><ul>
<li>js1.js 中：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;js1.js b()&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;a,b&#125;; <span class="comment">// 集体导出</span></span><br></pre></td></tr></table></figure>

<ul>
<li>js2.js 中：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> a = <span class="number">1</span>; <span class="comment">// 单个导出</span></span><br><span class="line"><span class="comment">// 一个 js 只能有一个 export default，可以在我们导入时自定义名字</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;js2.js default&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>main.js 中：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;a <span class="keyword">as</span> a1,b&#125; <span class="keyword">from</span> <span class="string">&quot;./js1.js&quot;</span>; <span class="comment">// 指定导入(as 重命名)</span></span><br><span class="line"><span class="comment">// import * as o from &quot;./js1.js&quot;; // 导入所有，并都放入 o 对象中</span></span><br><span class="line"><span class="keyword">import</span> &#123;a&#125; <span class="keyword">from</span> <span class="string">&quot;./js2.js&quot;</span>; <span class="comment">// 必须使用&#123;&#125;，否则 a 为 default 的导出</span></span><br><span class="line"><span class="keyword">import</span> def <span class="keyword">from</span> <span class="string">&quot;./js2.js&quot;</span>; <span class="comment">// 导入 default 的方法</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1,a);</span><br><span class="line"><span class="title function_">b</span>();</span><br><span class="line"><span class="title function_">def</span>();</span><br><span class="line"><span class="comment">// o.b();</span></span><br></pre></td></tr></table></figure>

<h2 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h2><h3 id="1-ES6-Promise："><a href="#1-ES6-Promise：" class="headerlink" title="1. ES6 Promise："></a>1. ES6 Promise：</h3><blockquote>
<ul>
<li>主要用于异步计算</li>
<li>可以将异步操作队列化，按照期望的顺序执行，返回符合预期的结果</li>
<li>可以在对象之间传递和操作 promise，帮助我们处理队列</li>
</ul>
</blockquote>
<p><strong>基本用法：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* promise 承诺 resolve 解决 reject 拒绝 then 然后 catch 抓住 */</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;执行方法 promise1&quot;</span>);</span><br><span class="line">    <span class="comment">// 表示执行成功，参数为你需要返回的值（可以是任意类型）</span></span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;方法 promise1 执行完成&quot;</span>);</span><br><span class="line">    <span class="comment">// return Promise.resolve(&quot;&quot;); // 作用同上</span></span><br><span class="line">    <span class="comment">// return &quot;&quot;; // 作用同上</span></span><br><span class="line">    <span class="comment">// 表示执行错误，resolve 与 reject 作用与 return 类似会阻断方法的执行 </span></span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;方法 pormise1 执行错误&quot;</span>);</span><br><span class="line">    <span class="comment">// return Promise.reject(&quot;&quot;); // 作用同上</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;执行方法 promise2&quot;</span>);</span><br><span class="line">            <span class="title function_">reject</span>(<span class="string">&quot;方法 promise2 执行错误&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 此处执行 promise1 then 中返回的 promise2 then</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">/* 上面有错误发生并未处理时在此处统一处理 */</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>Promise.all(Promise[]) 并发处理:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&quot;promise1 执行完成&quot;</span>);</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&quot;promise2 执行完成&quot;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">]).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br><span class="line"><span class="comment">// [&#x27;promise1 执行完成&#x27;, &#x27;promise2 执行完成&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-简单使用"><a href="#2-简单使用" class="headerlink" title="2. 简单使用:"></a>2. 简单使用:</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.axios-http.cn/">Axios 中文文档 | Axios 中文官网 (axios-http.cn)</a></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://cdnjs.com/">在 cdnjs 中搜索 axios 引入 js 文件</a> ：</p>
<p><code>&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js&quot;&gt;&lt;/script&gt;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认 get 请求</span></span><br><span class="line"><span class="title function_">axios</span>(<span class="string">&#x27;/api&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置参数</span></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">rul</span>: <span class="string">&#x27;/api&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>, <span class="comment">// 指定请求方式</span></span><br><span class="line">    <span class="attr">params</span>: &#123; <span class="comment">// 注意此参数是将值添加到 URL 路径中</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ruoxijun&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="comment">// 值存储在请求体中传递</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ruoxijun&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(res))</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/api&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ruoxijun&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br><span class="line"><span class="comment">// 如果 post 参数2为字符串，会拼接到 URL 中作为参数。axios.get 不支持</span></span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;/api&#x27;</span>,<span class="string">&#x27;name=ruoxijun&amp;age=18&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br></pre></td></tr></table></figure>

<p><strong>axios 并发请求处理</strong> ：</p>
<p>axios.all 与 Promise.all 方法类似</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">all</span>([</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&#x27;/api&#x27;</span>),</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&#x27;/api&#x27;</span>),</span><br><span class="line">]).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(res)) <span class="comment">// 请求结果集中到数组返回</span></span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">all</span>([</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&#x27;/api&#x27;</span>),</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&#x27;/api&#x27;</span>),</span><br><span class="line">]).<span class="title function_">then</span>(</span><br><span class="line">    <span class="comment">// 将请求结果作为方法参数</span></span><br><span class="line">    axios.<span class="title function_">spread</span>(<span class="function">(<span class="params">res1,res2</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res1,res2);</span><br><span class="line">    &#125;)</span><br><span class="line">).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br></pre></td></tr></table></figure>

<h3 id="3-全局配置与封装："><a href="#3-全局配置与封装：" class="headerlink" title="3. 全局配置与封装："></a>3. 全局配置与封装：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局配置</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&quot;http://localhost&quot;</span>; <span class="comment">// 请求路径前缀</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">timeout</span> = <span class="number">5000</span>; <span class="comment">// 请求超时时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 封装（每一个都可以认为是一个单独的 axios）</span></span><br><span class="line"><span class="keyword">let</span> git = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseurl</span>: <span class="string">&quot;https://github.com/&quot;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> local = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseurl</span>: <span class="string">&quot;https://localhost&quot;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">git.<span class="title function_">get</span>(<span class="string">&quot;/api&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br></pre></td></tr></table></figure>

<h3 id="4-拦截器："><a href="#4-拦截器：" class="headerlink" title="4. 拦截器："></a>4. 拦截器：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config; <span class="comment">// 放行</span></span><br><span class="line">&#125;,<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config; <span class="comment">// 放行</span></span><br><span class="line">&#125;,<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Vue3-1"><a href="#Vue3-1" class="headerlink" title="Vue3"></a>Vue3</h2><h3 id="1-初识-vue3"><a href="#1-初识-vue3" class="headerlink" title="1. 初识 vue3:"></a>1. 初识 vue3:</h3><ul>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/">官网（旧版） Vue.js (vuejs.org)</a></li>
<li><a target="_blank" rel="noopener" href="https://staging-cn.vuejs.org/">最新 Vue3 文档官网 Vue.js (vuejs.org)</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* // vue2 创建实例与挂载元素</span></span><br><span class="line"><span class="comment">const app = new vue(&#123;</span></span><br><span class="line"><span class="comment">    el: &#x27;#app&#x27;,</span></span><br><span class="line"><span class="comment">    data: &#123;</span></span><br><span class="line"><span class="comment">        message: &#x27;hello world&#x27;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;); */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// vue3 创建实例与挂载元素</span></span><br><span class="line"><span class="keyword">const</span> app = &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> vm = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(app).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"><span class="comment">// 访问属性</span></span><br><span class="line">vm.<span class="property">message</span> = <span class="string">&#x27;hello&#x27;</span>; <span class="comment">// 可直接访问（包括方法）</span></span><br><span class="line">vm.<span class="property">$data</span>.<span class="property">message</span> = <span class="string">&#x27;world&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-vue-cli："><a href="#2-vue-cli：" class="headerlink" title="2. vue-cli："></a>2. vue-cli：</h3><p>Vue-Cli（Command Line Interface） 是 vue 官方提供的脚手架工具。默认已经帮我们搭建好了一套利用 Webpack 管理 vue 的项目结构。</p>
<h4 id="1-命令须知："><a href="#1-命令须知：" class="headerlink" title="1. 命令须知："></a>1. 命令须知：</h4><ul>
<li>安装命令： <code>npm install -g @vue/cli</code></li>
<li>检查版本： <code>vue -version</code> 或 <code>vue -V</code></li>
<li>创建项目： <code>vue create 项目名称</code></li>
<li>卸载命令： <code>npm uninstall -g vue-cli</code></li>
</ul>
<h4 id="2-项目创建："><a href="#2-项目创建：" class="headerlink" title="2. 项目创建："></a>2. 项目创建：</h4><ol>
<li>执行 <code>vue create vue3-demo1</code> 命令开始创建项目：</li>
</ol>
<p><img src="/images/vue/vue3/vuecreate.png" alt="vue项目创建"></p>
<p>此处使用上下键加回车进行选择，前两个选项表示创建默认的 <strong>vue3</strong> 或 <strong>vue2</strong> 项目。默认创建的项目中包含两个插件：</p>
<p><strong>babel</strong> : 检查 es6转es5</p>
<p><strong>eslint</strong> : 检查 es 语法与修复</p>
<p>第三个选项 <code>Manually select features</code> 表示手动创建项目，建议使用。</p>
<ol start="2">
<li>默认的 vue3 项目结构：</li>
</ol>
<p><img src="/images/vue/vue3/vueproject.png" alt="vue项目创建"></p>
<ol start="3">
<li>手动创建项目：</li>
</ol>
<p><img src="/images/vue/vue3/manuallyselect.png" alt="vue项目创建"></p>
<p>选择 <code>Manually select features</code> 后进入上界面，通过上下键与空格选择或取消，选择完成后回车进入下一步。</p>
<p>之后对项目以及插件进行配置操作如下：</p>
<p><img src="/images/vue/vue3/vueprojectconfig.png" alt="vue项目创建"></p>
<p>如果最后对项目配置进行了保存删除 <code>C:\当前用户文件夹\.vuerc</code> 文件中可以去除保存的配置。</p>
<h4 id="3-vue-config-js"><a href="#3-vue-config-js" class="headerlink" title="3. vue.config.js:"></a>3. vue.config.js:</h4><p>当我们需要对 webpack 或插件进行配置时只需要在项目的根路径下新建 <code>vue.config.js</code> ，vue-cli 提供了方便的配置方法，我们也可以选择使用 webpack 原生的配置方法进行配置。</p>
<p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/config/">配置详情请参照： Configuration Reference | Vue CLI (vuejs.org)</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// 设置项目编译后的文件夹（vue-cli 提供的配置方法）</span></span><br><span class="line">    <span class="attr">outputDir</span>: <span class="string">&#x27;build&#x27;</span>,</span><br><span class="line">    <span class="attr">configureWebpack</span>: &#123; <span class="comment">// 使用 webpack 原生方法配置</span></span><br><span class="line">        <span class="attr">plugins</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-Vue3-语法："><a href="#3-Vue3-语法：" class="headerlink" title="3. Vue3 语法："></a>3. Vue3 语法：</h3><h4 id="1-基础语法："><a href="#1-基础语法：" class="headerlink" title="1. 基础语法："></a>1. 基础语法：</h4><ol>
<li>插值表达式： <code>&#123;&#123;msg&#125;&#125;</code> 注意只接受表达式，不能使用语句</li>
<li>简单指令 <code>v-指令</code> :<ul>
<li><code>v-pre</code> ：不解析该标签中的 vue 语法</li>
<li><code>v-once</code> ：该标签中的 vue 语法只解析一次</li>
<li><code>v-text</code> ：向该标签中插入文本</li>
<li><code>v-html</code> ：向改标签中插入 html（v-html&#x3D;”不能在此直接书写html”）</li>
<li><code>v-show</code> ：是否显示该标签</li>
<li><code>v-if , v-else , v-else-if</code> ：是否渲染该标签</li>
<li><code>v-cloak</code> ：防止弱网络环境下渲染闪烁问题</li>
</ul>
</li>
</ol>
<h4 id="2-v-bind："><a href="#2-v-bind：" class="headerlink" title="2. v-bind："></a>2. v-bind：</h4><ol>
<li>简单使用：</li>
</ol>
<p><code>v-bind:属性名</code> 主要对标签的属性进行绑定,除此它还有一种简写的方式 <code>:属性名</code> 。</p>
<ol start="2">
<li>绑定 style：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 绑定的样式与原有的样式会根据先后顺序以及优先级关系覆盖（如下宽200被宽100覆盖）</span></span><br><span class="line">&lt;div :style=<span class="string">&quot;[&#x27;font-size:22px&#x27;,&#x27;width:200px&#x27;,fontcolor,styles]&quot;</span></span><br><span class="line">    style=<span class="string">&quot;width:100px;&quot;</span> &gt; div <span class="number">1</span> &lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;color:&#x27;red&#x27;,&#x27;font-size&#x27;:&#x27;18px&#x27;&#125;&quot;</span>&gt;</span> div 3 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="comment">/* javascript */</span></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">fontcolor</span>: <span class="string">&#x27;color:red&#x27;</span>, <span class="comment">// 字体颜色</span></span><br><span class="line">        <span class="attr">styles</span>: &#123;<span class="attr">backgroundColor</span>: <span class="string">&#x27;#123&#x27;</span>&#125;, <span class="comment">// 背景</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>绑定 class：</li>
</ol>
<p>style 与 class 的属性绑定都支持 <strong>字符串、数组、对象（常用）、方法</strong> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :<span class="keyword">class</span>=<span class="string">&quot;one&quot;</span>&gt; div <span class="number">3</span> &lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;one:isone,istwo&#125;&quot;</span>&gt;</span> div 4 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="comment">/* javascript */</span></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">one</span>: <span class="string">&#x27;one&#x27;</span>,</span><br><span class="line">        <span class="attr">isone</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">istwo</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* style */</span>    </span><br><span class="line">.<span class="property">one</span> &#123;<span class="attr">color</span>: blue;&#125;</span><br><span class="line">.<span class="property">istwo</span> &#123;font-<span class="attr">size</span>:18px;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-computed："><a href="#3-computed：" class="headerlink" title="3. computed："></a>3. computed：</h4><ul>
<li>html：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>插值方式： &#123;&#123;name + msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>方法返回： &#123;&#123;getTitle()&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>计算属性： &#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>使用 set： &#123;&#123;setTitle()&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>javascript：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;world&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">getTitle</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="variable language_">this</span>.<span class="property">msg</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setTitle</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// return ’hi‘ set 方法会返回设置的值</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">title2</span>=<span class="string">&#x27;hi&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">title2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">title</span>(<span class="params"></span>) &#123; <span class="comment">// 为方法是默认为计算属性的 get 方法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="variable language_">this</span>.<span class="property">msg</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">title2</span>:&#123; <span class="comment">// 使用对象为属性添加 set、get 方法</span></span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="variable language_">this</span>.<span class="property">msg</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">newVla</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">msg</span> = newVla;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>计算属性只有在 get 方法中 vue 的属性值发生改变时，才会重新计算否则都将使用缓存的数据。而普通方法看你在页面中调用了多少次则运行多少次。</p>
<h4 id="4-v-on："><a href="#4-v-on：" class="headerlink" title="4. v-on："></a>4. v-on：</h4><ul>
<li><code>v-on:click</code> ：绑定一个点击事件，简写 <code>@click</code></li>
</ul>
<p>当调用事件方法时没有传入参数，且声明方法时只有一个参数，默认该参数的值就是事件 <code>event</code> 对象。当有多个参数且我们需要事件对象时 <code>$event</code> 作为参数它就代表了当前事件对象（<code>@click=&quot;click(val,$event)&quot;</code>）； </p>
<p><strong>事件修饰符：</strong></p>
<ul>
<li><code>stop</code> ：阻止事件冒泡</li>
<li><code>self</code> ：当前事件由该元素本身触发时才执行</li>
<li><code>capture</code> ：事件捕获模式（如点击事件触发且冒泡时，会优先执行添加该修饰符的外层）</li>
<li><code>prevent</code> ：阻止默认事件</li>
<li><code>once</code> ：事件只触发一次</li>
</ul>
<h4 id="5-v-for："><a href="#5-v-for：" class="headerlink" title="5. v-for："></a>5. v-for：</h4><p><code>v-for</code> 可以循环渲染标签</p>
<ul>
<li><code>v-for=&quot;(item, [index]) in arr&quot;</code> ：循环数组</li>
<li><code>v-for=&quot;(val, [key], [index]) in obj&quot;</code> ：循环对象</li>
</ul>
<p>vue 对于循环的标签提供了一个 <code>:key</code> 唯一标识符属性，当循环的数组或者对象改变时它会去对比这个 key 值，只重新渲染改变了的数据,而不去影响未改变的数据增加渲染效率。</p>
<p><code>&lt;div v-for=&quot;(v,i) in arr&quot; :key=&quot;i&quot;&gt;&lt;/div&gt;</code> ：使用唯一标识符的循环</p>
<ul>
<li>在 vue3 中 <code>v-if</code> 优先级大于 <code>v-for</code> ，vue2 反之。</li>
</ul>
<h4 id="6-v-model："><a href="#6-v-model：" class="headerlink" title="6. v-model："></a>6. v-model：</h4><ul>
<li><code>&lt;input v-model=&quot;val&quot; /&gt;</code> ：</li>
</ul>
<p><strong>修饰符：</strong></p>
<ul>
<li><code>lazy</code> ：懒加载</li>
<li><code>number</code> ：让绑定值（默认 string）转换为 number 类型</li>
<li><code>trim</code> ：去除绑定值两端的空格</li>
</ul>
<p><strong>单选框与多选框：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>性别：&#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">男：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">女：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">协议：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;yes&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;type&quot;</span>&gt;</span> &#123;&#123;type&#125;&#125; <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>爱好：&#123;&#123;like&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">java：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;like&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">html：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;html&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;like&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">php：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;php&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;like&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;selects&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里 <code>v-model</code> 就代表了它们的 name 属性同时与 value 绑定。</p>
<p>radio 需要默认选中时将绑定的变量设置为你需要的 value 即可。</p>
<p>checkbox 单个时绑定的属性为值为 true&#x2F;false 表示它是否选中。多个时绑定一个数组，数组的值可以设置为需要默认选中的 value 数组值。</p>
<p>select 标签使用上同理多选绑定数组即可。</p>
<h4 id="7-watch"><a href="#7-watch" class="headerlink" title="7. watch:"></a>7. watch:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>:&#123; <span class="comment">// 属性监听</span></span><br><span class="line">    <span class="title function_">message</span>(<span class="params">newVal, oldVal</span>)&#123;&#125;, <span class="comment">// 监听 data 中 message 的变化</span></span><br><span class="line">    <span class="attr">obj</span>: &#123; <span class="comment">// 监听 data 中 obj 属性的变化</span></span><br><span class="line">        <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>)&#123;&#125;, <span class="comment">// 触发方法</span></span><br><span class="line">        <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="comment">// 初始化是否执行一次</span></span><br><span class="line">        <span class="attr">deep</span>: <span class="literal">true</span>, <span class="comment">// 开启深度监听</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-Teleport："><a href="#8-Teleport：" class="headerlink" title="8. Teleport："></a>8. Teleport：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 将内容传送到指定 dom 节点，不受父级影响，disabled 是否传送默认true --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Teleport</span> <span class="attr">:disabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">to</span>=<span class="string">&quot;body&quot;</span>&gt;</span> <span class="comment">&lt;!-- 类：.main , id：#main --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span> Hello from the modal! <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Teleport</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="9-component："><a href="#9-component：" class="headerlink" title="9. component："></a>9. component：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Bar</span> <span class="keyword">from</span> <span class="string">&#x27;./Bar.vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123; <span class="title class_">Foo</span>, <span class="title class_">Bar</span> &#125;, <span class="comment">// 注册组件</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">view</span>: <span class="string">&#x27;Foo&#x27;</span> <span class="comment">// 组件名</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 绑定组件名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 直接绑定组件（直接绑定组件 is 可以不需要 v-bind） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;Foo&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-组件化开发："><a href="#4-组件化开发：" class="headerlink" title="4. 组件化开发："></a>4. 组件化开发：</h3><h4 id="1-创建组件："><a href="#1-创建组件：" class="headerlink" title="1. 创建组件："></a>1. 创建组件：</h4><p>我在 components 文件夹中创建了一个名为 MyComponent.vue 文件，这是组件化开发一个组件的基本格式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-text</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;Demo&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">msg</span>: <span class="string">&quot;this is MyComponent&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- style 中的样式一般子组件也能使用 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- scoped 表示此 style 中的样式只允许当前组件中使用，该组件中的子组件不能使用 --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000041314876">关于 lang&#x3D;”scss” 使用：学习Scss-看这篇就够了 - SegmentFault 思否</a></p>
<h4 id="2-引用组件："><a href="#2-引用组件：" class="headerlink" title="2. 引用组件："></a>2. 引用组件：</h4><p>在 App.vue 中引用 MyComponent.vue 。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用组件，以下两种方式均可使用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">class</span>=<span class="string">“my-style”</span>&gt;</span><span class="tag">&lt;/<span class="name">MyComponent</span>&gt;</span> <span class="comment">&lt;!-- 当组件只有一个根节点时样式会作用到该根节点上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span> <span class="comment">&lt;!-- 推荐使用小写加横杠方式 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/MyComponent&#x27;</span>; <span class="comment">// 引入要使用的组件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">MyComponent</span>, <span class="comment">// 注册组件</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-props（父传子）："><a href="#3-props（父传子）：" class="headerlink" title="3. props（父传子）："></a>3. props（父传子）：</h4><ol>
<li>props 数组定义组件属性：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在子组件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>接收的父类消息: &#123;&#123;parentMsg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;parentMsg&#x27;</span>, ], <span class="comment">// 定义属性方便父组件传递数据</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在父组件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span> <span class="attr">:parent-msg</span>=<span class="string">&#x27;msg&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 将 msg 绑定到该属性上，可以绑定任意值（如字符串、对象等） --&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>props 对象定义组件属性并添加验证：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="comment">// 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)</span></span><br><span class="line">  <span class="attr">propA</span>: <span class="title class_">Number</span>, <span class="comment">// 给组件定义了一个 prop-a 属性</span></span><br><span class="line">  <span class="comment">// 多个可能的类型</span></span><br><span class="line">  <span class="attr">propB</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>],</span><br><span class="line">  <span class="comment">// 必填的字符串</span></span><br><span class="line">  <span class="attr">propC</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 带有默认值的数字</span></span><br><span class="line">  <span class="attr">propD</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">100</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 带有默认值的对象</span></span><br><span class="line">  <span class="attr">propE</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Object</span>,</span><br><span class="line">    <span class="attr">default</span>: &#123; <span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span> &#125;,</span><br><span class="line">    <span class="comment">// 在 vue2 时对象或数组默认值必须从一个工厂函数获取</span></span><br><span class="line">    <span class="comment">// default: function () &#123;</span></span><br><span class="line">    <span class="comment">//   return &#123; message: &#x27;hello&#x27; &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 自定义验证函数</span></span><br><span class="line">  <span class="attr">propF</span>: &#123;</span><br><span class="line">    <span class="attr">validator</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">      <span class="comment">// 这个值必须匹配下列字符串中的一个</span></span><br><span class="line">      <span class="keyword">return</span> [<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;danger&#x27;</span>].<span class="title function_">indexOf</span>(value) !== -<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>type 可以是如下类型，type 也可以是一个自定义构造器，使用 instanceof 检测：</p>
<ul>
<li><code>String</code></li>
<li><code>Number</code></li>
<li><code>Boolean</code></li>
<li><code>Array</code></li>
<li><code>Object</code></li>
<li><code>Date</code></li>
<li><code>Function</code></li>
<li><code>Symbol</code></li>
</ul>
<h4 id="4-emit（子传父）："><a href="#4-emit（子传父）：" class="headerlink" title="4. $emit（子传父）："></a>4. $emit（子传父）：</h4><ul>
<li>子组件无法直接改变 props 接收到的数据，可以通过向父组件传递数据方式通知父组件来改变数据。</li>
<li>官方建议：强烈建议使用 <code>emits</code> 记录每个组件所触发的所有事件（与 props 属性类似）。</li>
</ul>
<ol>
<li>在子组件中：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>接收的父类数据: &#123;&#123;number&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addNumber(2)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;number&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// emits 不是必须的，但是建议使用</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">emits</span>: [<span class="string">&#x27;addNumber&#x27;</span>], <span class="comment">// 可以使用对象 &#123;addNumber: val=&gt;val&gt;0&#125; 并添加验证</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">addNumber</span>(<span class="params">num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 为此组件定义了一个方法供父组件使用，并向该方法返回数据（可以为任意类型数据）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;addNumber&#x27;</span>,num);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在父组件中：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;&#123;number&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">my-component</span> <span class="attr">:number</span>=<span class="string">&quot;number&quot;</span> @<span class="attr">add-number</span>=<span class="string">&quot;addNumber&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/MyComponent&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">MyComponent</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">number</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">addNumber</span>(<span class="params">num</span>) &#123; <span class="comment">// 该方法与子组件绑定，并接收子组件返回的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">number</span> += num;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-父子间直接访问："><a href="#5-父子间直接访问：" class="headerlink" title="5. 父子间直接访问："></a>5. 父子间直接访问：</h4><ul>
<li><code>$parent</code> ：在子组件中使用该属性可直接调用父组件的方法或属性</li>
<li><code>$root</code> ：直接访问根组件中的属性（一般是 App.vue）</li>
<li><code>$children</code> ：vue2 中使用该属性访问子组件属性（vue3 已<strong>弃用</strong>）</li>
<li><code>$refs</code> ： 访问子组件属性或获取 dom 元素:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用 ref 绑定子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span> <span class="attr">ref</span>=<span class="string">&quot;com1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span> <span class="attr">ref</span>=<span class="string">&quot;com2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- $refs 通过 ref 的值来访问指定的子组件 --&gt;</span></span><br><span class="line">this.$refs.com1.msg=&quot;msg1&quot;;</span><br><span class="line">this.$refs.com2.msg=&quot;msg2&quot;;</span><br></pre></td></tr></table></figure>

<p><code>ref</code> 作用在普通 html 标签中时获取到的是标签 dom 元素。</p>
<ul>
<li><code>ref</code> 与 <code>v-for</code> 一同使用时，vue2 时 <code>$refs</code> 会返回循环的 dom&#x2F;组件 数组，vue3 中为了效率需要给 <code>ref</code> 绑定一个函数处理 <code>ref</code> 。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;i in 10&quot;</span> <span class="attr">:ref</span>=<span class="string">&quot;setItemRef&quot;</span>&gt;</span> &#123;&#123; i &#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">setItemRef(el) &#123; // 参1为循环得到的 dom/组件</span><br><span class="line">  this.divArr.push(el);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-slot-插槽："><a href="#6-slot-插槽：" class="headerlink" title="6. slot 插槽："></a>6. slot 插槽：</h4><ol>
<li>基本使用：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>缺省内容（默认内容）<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>slot</strong> 标签表示一个插槽，当使用该组件未插入任何内容时，会将 <strong>slot</strong> 标签中的内容作为默认内容显示。</p>
<ol start="2">
<li>具名插槽：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在子组件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 为 slot 添加name属性 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;one&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;two&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 未添加 name 属性的 slot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span>&gt;</span>3<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">templat</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在父组件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 使用 template 标签写入要插入的内容，v-slot 指定要插入的插槽 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:one</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>插入 one 中<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- # 简写方式等于 v-slot (不建议使用简写) --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">two</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>插入 two 中<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- default 表示没有 name 属性值的插槽 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>插入 default 中<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当子组件中有多个插槽时，插入的内容默认会插入所有没有 <code>name</code> 属性值的插槽中（<code>name=&quot;&quot;</code> 不会）。</p>
<ol start="3">
<li>插槽传值：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在子组件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:val</span>=<span class="string">&quot;msg&quot;</span>&gt;</span>使用 v-bind 定义 val 属性绑定 msg，可以定义多个属性，绑定任意值<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">msg</span>: <span class="string">&quot;this is child msg&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在父组件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 给传递的属性定义一个接收的对象，并使用插槽属性传递的值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">&quot;child_val&quot;</span>&gt;</span> <span class="comment">&lt;!-- 具名插槽同理 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>插入 default 中 - &#123;&#123;child_val.val&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>动态插槽：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 通过切换 slotName 属性值来动态切换插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #[<span class="attr">slotName</span>]&gt;</span> &#123;&#123; slotName &#125;&#125; <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123; <span class="attr">slotName</span>: <span class="string">&quot;one&quot;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-keep-alive："><a href="#7-keep-alive：" class="headerlink" title="7. keep-alive："></a>7. keep-alive：</h4><p><strong>官方解释：</strong> </p>
<p><code>&lt;keep-alive&gt;</code> 包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。和 <code>&lt;transition&gt;</code> 相似，<code>&lt;keep-alive&gt;</code> 是一个抽象组件：它自身不会渲染一个 DOM 元素，也不会出现在组件的父组件链中。</p>
<p>当组件在 <code>&lt;keep-alive&gt;</code> 内被切换时，它的 <code>mounted</code> 和 <code>unmounted</code> 生命周期钩子不会被调用，取而代之的是 <code>activated</code> 和 <code>deactivated</code>。(这会运用在 <code>&lt;keep-alive&gt;</code> 的直接子节点及其所有子孙节点。)</p>
<p>主要用于保留组件状态或避免重新渲染。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>include</code> &#x2F; <code>exclude</code> （包含&#x2F;排除）：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 以英文逗号分隔的字符串(标签名或组件名)，max 通过算法缓存指定个数内常用的组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">KeepAlive</span> <span class="attr">include</span>=<span class="string">&quot;a,b&quot;</span> <span class="attr">:max</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">KeepAlive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 正则表达式 (需使用 `v-bind`) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">KeepAlive</span> <span class="attr">:include</span>=<span class="string">&quot;/a|b/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">KeepAlive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 数组 (需使用 `v-bind` ，可以是字符串与正则表达式混合数组) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">KeepAlive</span> <span class="attr">:include</span>=<span class="string">&quot;[&#x27;a&#x27;, &#x27;b&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">KeepAlive</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-组件生命周期函数："><a href="#8-组件生命周期函数：" class="headerlink" title="8. 组件生命周期函数："></a>8. 组件生命周期函数：</h4><h5 id="1-组件生命周期图："><a href="#1-组件生命周期图：" class="headerlink" title="1. 组件生命周期图："></a>1. 组件生命周期图：</h5><p><img src="/images/vue/vue3/lifecycle.svg" alt="vue3 组件生命周期函数"></p>
<h5 id="2-组件生命周期方法："><a href="#2-组件生命周期方法：" class="headerlink" title="2. 组件生命周期方法："></a>2. 组件生命周期方法：</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;实例刚刚被创建&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;实例已经创建完成&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;模板编译之前&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;模板编译完成&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;数据更新之前&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;数据更新完成&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">activated</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;keep-alive 缓存的组件激活时&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">deactivated</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;keep-alive 缓存的组件停用时&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;实例销毁之前&quot;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;实例销毁完成&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-nexTick-："><a href="#3-nexTick-：" class="headerlink" title="3. $nexTick ："></a>3. $nexTick ：</h5><p><strong>官方解释：</strong>将回调推迟到下一个 DOM 更新周期之后执行。在更改了一些数据以等待 DOM 更新后立即使用它。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$nextTick(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 操作更新后的 Dom</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>例如在 <strong>created</strong> 中 Dom 还未创建完成，这时我们可以使用 <strong>$nexTick</strong> 写入即将对 Dom 进行的操作，等待 Dom 更新创建完成后将执行该操作。</li>
<li>列如一个很大的数组做了很大的改动你需要 Dom 更新完成之后做些什么，这时你可以在数组操作完的下一句使用 <code>$nextTick</code> 它会在 Dom 改动且渲染完成后做出操作。</li>
</ul>
<h2 id="Axios-与-Vue"><a href="#Axios-与-Vue" class="headerlink" title="Axios 与 Vue"></a>Axios 与 Vue</h2><h3 id="1-Vue-中使用-Axios："><a href="#1-Vue-中使用-Axios：" class="headerlink" title="1. Vue 中使用 Axios："></a>1. Vue 中使用 Axios：</h3><ul>
<li>项目中安装 Axios：<code>npm i axios -S</code></li>
<li>在组件中直接使用：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在需要 axios 的组件中导入</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>新建 js 文件封装 axios（以 src 下新建 @&#x2F;utils&#x2F;request.js 文件为例）：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span> <span class="comment">// 引入 axios</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 axios 实例</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="comment">// config</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/* 创建其它实例或实例配置等... */</span></span><br><span class="line"><span class="comment">// 导出需要使用的实例或者方法等...</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure>

<p>在组件中直接引入使用即可： <code>import &#123;request&#125; from &quot;@/utils/request&quot;</code></p>
<h3 id="2-Vue-封装-Axios-模板："><a href="#2-Vue-封装-Axios-模板：" class="headerlink" title="2. Vue 封装 Axios 模板："></a>2. Vue 封装 Axios 模板：</h3><p><strong>内容展示省略（TODO）</strong></p>
<h2 id="VueRouter"><a href="#VueRouter" class="headerlink" title="VueRouter"></a>VueRouter</h2><h3 id="1-认识路由："><a href="#1-认识路由：" class="headerlink" title="1. 认识路由："></a>1. 认识路由：</h3><ul>
<li><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/">官网 Vue Router (vuejs.org)</a></li>
<li>安装 axios： <code>npm install vue-router@4</code></li>
</ul>
<h4 id="1-基础使用："><a href="#1-基础使用：" class="headerlink" title="1. 基础使用："></a>1. 基础使用：</h4><ol>
<li>vue 中使用路由参照 vue-cli 创建路由项目（src 下 <strong>router&#x2F;index.js</strong>）：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; from <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> HomeView from <span class="string">&#x27;../views/HomeView.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="variable">routes</span> <span class="operator">=</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    component: HomeView</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    component: () =&gt; <span class="keyword">import</span>(<span class="string">&#x27;../views/AboutView.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="variable">router</span> <span class="operator">=</span> createRouter(&#123;</span><br><span class="line">  history: createWebHistory(process.env.BASE_URL),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>路由中导入组件 <code>import from</code> 方式打包时会将所有组件与路由打包到同一个 js 中。</p>
<p><code>() =&gt; import(&#39;组件&#39;)</code> 会将组件打包为单个 js 文件实现懒加载，推荐使用。</p>
<ol start="2">
<li>在 <strong>main.js</strong> 中注册路由：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(router).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 <strong>App.vue</strong> 中使用路由：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 路由跳转地址（与 a 标签作用类似，不建议使用a标签） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>/&gt;</span><span class="comment">&lt;!-- 路由视图展示 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 当前所在路由对应 router-link 激活的样式 */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">a</span><span class="selector-class">.router-link-exact-active</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#42b983</span>; <span class="comment">/* 如当前在首页时 Home 展示此样式 */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-路由模式："><a href="#2-路由模式：" class="headerlink" title="2. 路由模式："></a>2. 路由模式：</h4><p><code>Hash</code> ：使用 URL 的 hash值来作为路由，且 URL 中会带有 <strong># 号</strong>。</p>
<p><code>History</code> ：历史模式借助 HTML5 History API 实现。</p>
<p>切换 Hash 模式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// history: createWebHistory(process.env.BASE_URL), // 历史模式</span></span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(process.<span class="property">env</span>.<span class="property">BASE_URL</span>), <span class="comment">// Hash 模式（默认）</span></span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-重定向与别名："><a href="#3-重定向与别名：" class="headerlink" title="3. 重定向与别名："></a>3. 重定向与别名：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/HomeView.vue&#x27;</span>),</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/index&#x27;</span>,</span><br><span class="line">  <span class="comment">// alias: &#x27;/home&#x27;, // 别名</span></span><br><span class="line">  <span class="attr">alias</span>: [<span class="string">&#x27;/index.html&#x27;</span>,<span class="string">&#x27;/home&#x27;</span>],</span><br><span class="line">  <span class="comment">// alias: [&#x27;/home:id&#x27;] // 当此路径有使用 params 传参时，别名也需要将参数带上（params 传参下方有介绍）</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redirect</span>: <span class="string">&#x27;/&#x27;</span>, <span class="comment">// 重定向</span></span><br><span class="line">  <span class="comment">// redirect: &#123;name:&#x27;home&#x27;&#125;, // 也可以使用 path 路径方式</span></span><br><span class="line">  <span class="comment">/* 函数返回一个对象，函数参数就是 $route</span></span><br><span class="line"><span class="comment">  redirect: route=&gt;&#123;</span></span><br><span class="line"><span class="comment">    return &#123;path:&#x27;/&#x27;,query:&#123;id:route.params.id&#125;&#125; // query 传参下方有介绍</span></span><br><span class="line"><span class="comment">  &#125; */</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="2-router-link："><a href="#2-router-link：" class="headerlink" title="2. router-link："></a>2. router-link：</h3><ul>
<li>为路由激活状态的 router-link 设置 class:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- active-class 指点激活样式 class，target=&quot;_blank&quot; 重新打开一个网页到首页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>自定义路由方式与常用 API：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用插槽方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>About<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="comment">&lt;!-- 替换 a 标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 访问新的页面并添加历史记录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/user&#x27;)&quot;</span>&gt;</span>个人中心<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 访问新页面并直接替换当前记录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$router.replace(&#x27;/about&#x27;)&quot;</span>&gt;</span>关于我们<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 返回上一页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$router.go(-1)&quot;</span>&gt;</span>返回<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 当前路由路径（注意这里是 route 不是 router） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;$route.path&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用命名视图（了解）：</li>
</ul>
<p>可以为 router-view 设置 <strong>name</strong> 属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 展示默认组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 展示相应名称组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">&quot;home&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">&quot;about&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置路由时使用 components 对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">  <span class="comment">// component: ()=&gt; import(&#x27;../views/HomeView.vue&#x27;),</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="attr">default</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/HomeView.vue&#x27;</span>), <span class="comment">// 没有对应命名视图时默认显示组件</span></span><br><span class="line">    <span class="attr">home</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/HomeView.vue&#x27;</span>), <span class="comment">// name 为 home 的视图展示该组件</span></span><br><span class="line">    <span class="attr">about</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/AboutView.vue&#x27;</span>),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-嵌套路由："><a href="#3-嵌套路由：" class="headerlink" title="3. 嵌套路由："></a>3. 嵌套路由：</h3><ol>
<li>路由中定义子路由：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/AboutView.vue&#x27;</span>),</span><br><span class="line">  <span class="comment">// redirect: &#x27;/about/Children1&#x27;, // 重定向</span></span><br><span class="line">  <span class="attr">children</span>: [ <span class="comment">// children 数组定义子路由</span></span><br><span class="line">    &#123; </span><br><span class="line">      <span class="attr">path</span>:<span class="string">&#x27;&#x27;</span>, <span class="comment">// 相当于设置 &#x27;/about&#x27; 路径时默认显示的组件（优先与重定向）</span></span><br><span class="line">      <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../components/Children1.vue&#x27;</span>)</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;children1&#x27;</span>, <span class="comment">// 子路由路径不需要 &#x27;/&#x27;</span></span><br><span class="line">      <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../components/Children1.vue&#x27;</span>)</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;children2&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../components/Children2.vue&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用子路由（这里是 AboutView.vue 中）：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/children1&quot;</span>&gt;</span>Children1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span> <span class="comment">&lt;!-- to 需要写全路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/children2&quot;</span>&gt;</span>Children1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意 <strong>父级路由</strong> 不能设置 <strong>name</strong> 属性。</p>
<h3 id="4-动态路由与参数传递："><a href="#4-动态路由与参数传递：" class="headerlink" title="4. 动态路由与参数传递："></a>4. 动态路由与参数传递：</h3><h4 id="1-params-与-query-传参："><a href="#1-params-与-query-传参：" class="headerlink" title="1. params 与 query 传参："></a>1. params 与 query 传参：</h4><ol>
<li>路由定义：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;children1/:msg&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../components/Children1.vue&#x27;</span>)</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;children2&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;children2&#x27;</span>, <span class="comment">// 定义路由名</span></span><br><span class="line">  <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../components/Children2.vue&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用路由并传递参数：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- router4 版本 params 方式不传参会报错 No match found for location with path --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/children1/1&quot;</span>&gt;</span>子路由页面 - 1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- query 不传参不会报错 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about/children2?name=user&amp;age=18&quot;</span>&gt;</span>子路由页面 - 2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;path:&#x27;/about/children2&#x27;,query:&#123;name:&#x27;user&#x27;,age:18&#125;&#125;&quot;</span>&gt;</span>子路由页面 - 2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;children2&#x27;,query:&#123;name:&#x27;user&#x27;,age:18&#125;&#125;&quot;</span>&gt;</span>子路由页面 - 2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在对应组件中接收参数值：</li>
</ol>
<ul>
<li><p>params：参数接收方式： <code>$route.params.id</code></p>
</li>
<li><p>query 参数接收方式： <code>$route.query.name</code></p>
</li>
</ul>
<h4 id="2-props-传参："><a href="#2-props-传参：" class="headerlink" title="2. props 传参："></a>2. props 传参：</h4><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/essentials/passing-props.html">将 props 传递给路由组件 | Vue Router (vuejs.org)</a></p>
<ol>
<li>在 params 传参基础之上定义路由时添加 <code>props: true</code> 属性值。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>, <span class="comment">// 定义一个路径参数变量名为 id</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: <span class="literal">true</span>, <span class="comment">// 使用 props 传参</span></span><br><span class="line">  <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/UserView.vue&#x27;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在此对应路由组件 <strong>props</strong> 属性中定义一个与路径变量名同名的属性类接收此参数值。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;id&#x27;</span>], <span class="comment">// 保证名称与变量名一致</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-导航守卫："><a href="#5-导航守卫：" class="headerlink" title="5. 导航守卫："></a>5. 导航守卫：</h3><ul>
<li>扩展路由 meta 原信息:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/HomeView.vue&#x27;</span>),</span><br><span class="line">  <span class="attr">meta</span>: &#123; <span class="comment">// 路由原信息（可以存储任意信息）</span></span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-全局守卫："><a href="#1-全局守卫：" class="headerlink" title="1. 全局守卫："></a>1. 全局守卫：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局前置守卫，to 准备跳转的路由，from 当前路由（next 参数3支持但不建议使用）</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// path 路由路径，fullPath 完整路径（包括 query 参数） </span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(to.<span class="property">path</span>,<span class="keyword">from</span>.<span class="property">fullPath</span>);</span><br><span class="line">  <span class="comment">// return &#x27;/login&#x27;; // 重定向</span></span><br><span class="line">  <span class="comment">// return &#123;name: &quot;Login&quot;&#125;;</span></span><br><span class="line">  <span class="comment">// return false; // 取消导航</span></span><br><span class="line">  <span class="comment">/* 注意添加 next 参数后必须由 next 控制跳转，</span></span><br><span class="line"><span class="comment">  return 将不起作用，且不 next() 时也不能默认跳转下一页面 */</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局解析守卫（每次导航时都会触发）</span></span><br><span class="line">router.<span class="title function_">beforeResolve</span>(<span class="function"><span class="params">to</span>=&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// return false;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局后置钩子，to 调转到的路由，from 之前的路由，failure 导航是否成功（不支持 next 参数）</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, failure</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 将页面标题更改为 meta.title 属性的值</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="2-路由守卫："><a href="#2-路由守卫：" class="headerlink" title="2. 路由守卫："></a>2. 路由守卫：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/UserView.vue&#x27;</span>),</span><br><span class="line">  <span class="comment">// 路由守卫，同一路由只有 params、query 改变时不会触发</span></span><br><span class="line">  <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// return false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 也可以是函数数组</span></span><br><span class="line">  <span class="comment">// beforeEnter: [removeQueryParams, removeHash],</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-组件守卫："><a href="#3-组件守卫：" class="headerlink" title="3. 组件守卫："></a>3. 组件守卫：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt; </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="comment">// 在渲染该组件的对应路由被验证前调用</span></span><br><span class="line">    <span class="comment">// 不能获取组件实例 `this`，因为当守卫执行时，组件实例还没被创建</span></span><br><span class="line">    <span class="comment">// 可以使用 next 的 vm 参数方位实例（仅 beforeRouteEnter 可使用）</span></span><br><span class="line">    <span class="title function_">next</span>(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 通过 `vm` 访问组件实例</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteUpdate</span>(<span class="params">to, <span class="keyword">from</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 在当前路由改变，但是该组件被复用时调用</span></span><br><span class="line">    <span class="comment">// 举例来说，对于一个带有动态参数的路径 `/users/:id`，在 `/users/1` 和 `/users/2` 之间跳转的时候，</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 在导航离开该组件的对应路由时调用</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-导航流程："><a href="#4-导航流程：" class="headerlink" title="4. 导航流程："></a>4. 导航流程：</h4><ol>
<li>导航被触发。</li>
<li>在失活的组件里调用 <code>beforeRouteLeave</code> 守卫。</li>
<li>调用全局的 <code>beforeEach</code> 守卫。</li>
<li>在重用的组件里调用 <code>beforeRouteUpdate</code> 守卫(2.2+)。</li>
<li>在路由配置里调用 <code>beforeEnter</code>。</li>
<li>解析异步路由组件。</li>
<li>在被激活的组件里调用 <code>beforeRouteEnter</code>。</li>
<li>调用全局的 <code>beforeResolve</code> 守卫(2.5+)。</li>
<li>导航被确认。</li>
<li>调用全局的 <code>afterEach</code> 钩子。</li>
<li>触发 DOM 更新。</li>
<li>调用 <code>beforeRouteEnter</code> 守卫中传给 <code>next</code> 的回调函数，创建好的组件实例会作为回调函数的参数传入。</li>
</ol>
<h3 id="6-keep-alive-与-transition："><a href="#6-keep-alive-与-transition：" class="headerlink" title="6. keep-alive 与 transition："></a>6. keep-alive 与 transition：</h3><ul>
<li>vue2 时可以直接使用 <code>transition</code> 或 <code>keep-alive</code> 包裹组件。</li>
<li>vue3 需使用下方式：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; Component &#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;Component&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><h3 id="1-认识-Vuex："><a href="#1-认识-Vuex：" class="headerlink" title="1. 认识 Vuex："></a>1. 认识 Vuex：</h3><ul>
<li><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/index.html">Vuex 官网 (vuejs.org)</a></li>
<li><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/">Pinia 官网</a></li>
<li><a target="_blank" rel="noopener" href="https://pinia.web3doc.top/">Pinia 中文文档 (web3doc.top)</a></li>
<li>安装： <code>npm install vuex@next --save</code></li>
</ul>
<h4 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h4><p><img src="/images/vue/vue3/vuex.png" alt="Vuex 工作原理图"></p>
<h4 id="引入方式："><a href="#引入方式：" class="headerlink" title="引入方式："></a>引入方式：</h4><ol>
<li>在 <strong>src&#x2F;store</strong> 目录下新建 <strong>index.js</strong> 内容如下：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 <strong>main.js</strong> 中注册 Vuex ：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(store).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>); <span class="comment">// 注册 Vuex</span></span><br></pre></td></tr></table></figure>

<h3 id="2-核心概念："><a href="#2-核心概念：" class="headerlink" title="2.核心概念："></a>2.核心概念：</h3><h4 id="1-State（状态）："><a href="#1-State（状态）：" class="headerlink" title="1. State（状态）："></a>1. State（状态）：</h4><ul>
<li>在 Vuex 的 state（<em>src&#x2F;store&#x2F;index.js</em>）中可以存储记录任意属性值，因此也被称之为 Vuex 的状态。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ruoxijun&#x27;</span>, <span class="comment">// 这里声明了一个那么属性值</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>在组件中读取状态值：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;$store.state.name&#125;&#125; - &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="comment">&lt;!-- 访问 Vuex 状态中的属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">name</span>, <span class="comment">// 已经注册在 vue 中，vue 的属性必须用 this 访问</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Mutation（改变）"><a href="#2-Mutation（改变）" class="headerlink" title="2. Mutation（改变）:"></a>2. Mutation（改变）:</h4><p>组件中使用 <code>$store.state</code> 访问状态属性，也可以直接修改属性值，但并不推荐。官方推荐我们使用 <strong>mutations</strong> 搭配 <strong>$store.commit</strong> 的方式来修改状态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*********** Vuex 中 ************/</span></span><br><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 默认会将 state 作为第一个参数传入你的方法中</span></span><br><span class="line"><span class="comment">   * 参数2来接收用户传入的数据（payload 官方称之为载荷，并表示其应该是一个对象）</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">setStateName</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">    state.<span class="property">name</span> = payload; <span class="comment">// 修改状态</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********** 组件中 ************/</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">setStateName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * 使用 commit 来修改 Vuex 状态</span></span><br><span class="line"><span class="comment">      * 参数1为在 mutations 中需要被调用的方法名</span></span><br><span class="line"><span class="comment">      * 参数2为你需要传递的参数值（有多个值需要传递时使用对象或数组）</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;setStateName&#x27;</span>,<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>使用对象风格 commit：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*********** 组件中 ************/</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;setStateName&#x27;</span>, <span class="comment">// 使用 type 属性指定方法名称</span></span><br><span class="line">    <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">name</span> <span class="comment">// 参数值（属性名可以自定义）</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********** Vuex 中 ************/</span></span><br><span class="line"><span class="title function_">setStateName</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">    <span class="comment">// 注意接收到的参数值作为对象在参2中</span></span><br><span class="line">    state.<span class="property">name</span> = payload.<span class="property">name</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="3-Getter（属性）"><a href="#3-Getter（属性）" class="headerlink" title="3. Getter（属性）:"></a>3. Getter（属性）:</h4><ul>
<li>Vuex 中 getters 与 vue 中的计算属性类似：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="comment">// 默认会将 state、getters 分别传入参1、2中</span></span><br><span class="line">    <span class="title function_">nameAndNum</span>(<span class="params">state, getters</span>)&#123;</span><br><span class="line">        <span class="comment">// 可以使用参2（getters）调用 getters 中的其它方法</span></span><br><span class="line">        <span class="keyword">return</span> state.<span class="property">name</span> + state.<span class="property">loginUser</span>.<span class="property">number</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>组件中使用 <code>$store.getters</code> 进行访问：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> geteer：&#123;&#123;$store.getters.nameAndNum&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>传参技巧：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">functionName</span>(state, getters)&#123;</span><br><span class="line">    <span class="comment">// 返回带参的函数，调用时传入参数即可</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">parameter</span> =&gt;</span> &#123;<span class="comment">/* ... */</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-Action（异步）"><a href="#4-Action（异步）" class="headerlink" title="4. Action（异步）:"></a>4. Action（异步）:</h4><p>Action 可以包含任意异步操作，常用做异步请求之类操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="comment">// 参数1是 Vuex 上下文对象</span></span><br><span class="line">  <span class="title function_">action1</span>(<span class="params">context</span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(context),<span class="number">1500</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 基本使用与 mutations 中类似（除参1不同）</span></span><br><span class="line">  <span class="title function_">action2</span>(<span class="params">&#123;state, commit, getters, dispatch&#125;, payload</span>)&#123;</span><br><span class="line">    <span class="comment">/* context 解构大概有这几个属性 */</span></span><br><span class="line">    <span class="comment">// state.name // 访问状态</span></span><br><span class="line">    <span class="comment">// commit(&#x27;setStateName&#x27;, payload) // 依然推荐使用 commit 方式修改数据</span></span><br><span class="line">    <span class="comment">// getters.nameAndNum // 访问 getters 属性</span></span><br><span class="line">    <span class="comment">// dispatch(&#x27;action1&#x27;, payload) // 调用 actions 中的其它方法</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>组件中使用 <code>$store.dispatch</code> 调用方法：<code>this.$store.dispatch(&quot;action1&quot;)</code></p>
<p>使用大致与 <code>commit</code> 类似，它的参2也用来接收参数（同样支持对象风格的 dispatch）</p>
<p><strong>context</strong> 中还包含了 <code>rootState</code> 和 <code>rootGetters</code> 两个属性，这是在下面模块中需要用到的。</p>
<h4 id="5-Module（模块）"><a href="#5-Module（模块）" class="headerlink" title="5. Module（模块）:"></a>5. Module（模块）:</h4><p>Vuex 允许我们将 store 分割成 <strong>模块（module）</strong>，每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块。</p>
<ol>
<li>state（子模块状态）：</li>
</ol>
<p>注册一个子模块 module1 ： <code>modules: &#123; module1 &#125;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> module1 = &#123;</span><br><span class="line">    <span class="attr">state</span>: <span class="function">()=&gt;</span>&#123; <span class="comment">// 与组件类似，子模块的state需要使用函数封装</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// $store.state.module1.module1Name 组件中访问方式</span></span><br><span class="line">            <span class="attr">module1Name</span>: <span class="string">&#x27;module1Name&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>getters、mutations、actions：</li>
</ol>
<p><strong>默认</strong> 情况下，<strong>模块内部</strong> 的 <strong>getters、mutations、actions</strong> 仍然是注册在 <strong>全局命名空间</strong> 的——这样使得多个模块能够对同一个 getters、mutations、actions 作出响应。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="comment">// $store.commit(&#x27;setName&#x27;,payload) // 默认全局注册</span></span><br><span class="line">  <span class="title function_">setName</span>(<span class="params">state, payload</span>)&#123;</span><br><span class="line">    <span class="comment">// state 只能访问子模块状态</span></span><br><span class="line">    state.<span class="property">module1Name</span> = payload;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> state       默认子模块中的 state 只能访问子模块的状态</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> getters     只能访问模块的 getters</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> rootState   访问根模块的状态</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> rootGetters 访问根模块的 getters</span></span><br><span class="line"><span class="comment">   * 组件访问方式：$store.getters.getModule1Name // 默认全局</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">getModule1Name</span>(<span class="params">state, getters, rootState, rootGetters</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> module1Name + rootState.<span class="property">name</span>; <span class="comment">// 访问根组件的状态属性</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * actions 参1 context 中除根节点介绍过的属性外，</span></span><br><span class="line"><span class="comment">   * 还有 rootState、rootGetters 来访问根节点。</span></span><br><span class="line"><span class="comment">   * 组件访问方式：$store.dispatch(&quot;module1Actions&quot;, payload) // 默认全局</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">module1Actions</span>(<span class="params">&#123;rootState, rootGetters&#125;, payload</span>)&#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">modules</span>: &#123; <span class="comment">/* 嵌套子模块 */</span> &#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>命名空间：</li>
</ol>
<p>getters、mutations、actions 默认是与根模块整合的（同名属性根模块优先），如果希望你的模块具有更高的封装度和复用性，你可以通过添加 <code>namespaced: true</code> 的方式使其成为带命名空间的模块。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> module1 = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">// 开启命名空间</span></span><br><span class="line">  <span class="comment">// 嵌套子模块</span></span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">myPage</span>: &#123; <span class="comment">// 继承父模块的命名空间</span></span><br><span class="line">      <span class="attr">getters</span>: &#123;</span><br><span class="line">        profile () &#123;&#125; <span class="comment">// -&gt; getters[&#x27;module1/profile&#x27;]</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">posts</span>: &#123;</span><br><span class="line">      <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">// 进一步嵌套命名空间</span></span><br><span class="line">      <span class="attr">getters</span>: &#123;</span><br><span class="line">        popular () &#123;&#125; <span class="comment">// -&gt; getters[&#x27;module1/posts/popular&#x27;]</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>访问方式(state 自带命名空间)：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$store.<span class="property">getters</span>[<span class="string">&#x27;module1/getModule1Name&#x27;</span>]</span><br><span class="line">$store.<span class="title function_">commit</span>(<span class="string">&#x27;module1/setName&#x27;</span>, payload)</span><br><span class="line">$store.<span class="title function_">dispatch</span>(<span class="string">&quot;module1/setName&quot;</span>, payload)</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>Vuex 模块化编程：</li>
</ol>
<p>将 getters、mutations、actions、modules 抽取出来形成单独的 JS 文件，使用 <code>export default</code> 导出并在 Vuex 主文件导入。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vuex 核心概念</span></span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span>; <span class="comment">// 不需要 js 的后缀</span></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span>;</span><br><span class="line"><span class="comment">// 模块（可以根据不同的模块来细分）</span></span><br><span class="line"><span class="keyword">import</span> module1 <span class="keyword">from</span> <span class="string">&#x27;./module/module1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;<span class="comment">/* 状态 */</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  state,</span><br><span class="line">  getters,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    module1,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h2><h3 id="1-setup："><a href="#1-setup：" class="headerlink" title="1. setup："></a>1. setup：</h3><p><strong>setup</strong> 函数是一个新的组件选项，作为组件中组合式 API 的入口，函数在 <strong>beforeCreate</strong> 生命周期钩子执行之前执行，实例还没生成，<em><strong>没有 this</strong></em>。</p>
<p>setup 有两个可选参数 <strong>props</strong> 与 <strong>context</strong> ，props 是访问组件 props 属性值的对象。context 包含 4 个属性 <strong>attrs、slots、emit、expose</strong>。</p>
<ul>
<li>父组件中：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com-a-p-i</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">title</span>=<span class="string">&quot;home&quot;</span> @<span class="attr">comfun</span>=<span class="string">&quot;comfun&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>slot<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">com-a-p-i</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>实例组件中：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;count&#125;&#125; <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;a&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params">props, &#123; attrs, slots, emit, expose &#125;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setup&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;props&quot;</span>, props.<span class="property">name</span>); <span class="comment">// 访问组件 props</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 访问组件标签属性(props 定义的属性无法访问)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;attrs&quot;</span>, attrs.<span class="property">title</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;slots&quot;</span>, slots.<span class="title function_">a</span>()); <span class="comment">// 拿到具名插槽内容对象（default() 默认插槽对象）</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emit</span>(<span class="string">&quot;comfun&quot;</span>, <span class="string">&quot;向父组件传递数据&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123; <span class="attr">count</span>:<span class="number">1</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeCreate&quot;</span>); <span class="comment">// 在 setup 之后</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>context 的 expose 能显式地限制该组件暴露出的 property，当父组件通过 <a target="_blank" rel="noopener" href="https://staging-cn.vuejs.org/guide/essentials/template-refs.html#ref-on-component">模板 ref</a> 访问该组件的实例时，将仅能访问 <code>expose</code> 函数暴露出的内容。</li>
<li>setup 发返回值为一个对象，该对象中的属性值是暴露给组件访问的。属性值只有是 composition api 创建的响应式对象才能够像 data 中的属性一样响应式的改变。</li>
</ul>
<h3 id="2-常用-API："><a href="#2-常用-API：" class="headerlink" title="2. 常用 API："></a>2. 常用 API：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Composition API 都必须导入才能使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, reactive, toRef, toRefs, readonly, isRef, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> num = <span class="number">1</span>; <span class="comment">// 基本类型</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ref 为单个数据提供响应式代理</span></span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// ref 定义的对象在 setup 中必须使用 value 访问或修改（视图中可以直接访问）</span></span><br><span class="line">    count.<span class="property">value</span>++;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// reactive 只能为对象或数组提供响应式代理</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="title function_">reactive</span>(&#123; <span class="attr">name</span>:<span class="string">&quot;hi&quot;</span>, <span class="attr">age</span>:<span class="number">18</span> &#125;);</span><br><span class="line">    user.<span class="property">age</span>++; <span class="comment">// 正常使用</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// toRef 从对象响应式数据中提取单个数据作为响应式数据</span></span><br><span class="line">    <span class="keyword">const</span> name = <span class="title function_">toRef</span>(user,<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    name.<span class="property">value</span> = <span class="string">&quot;ha&quot;</span>; <span class="comment">// user.name 或 name 改变双方都会发生改变</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// toRefs 对象响应式数据转普通对象，但属性只修改为响应式数据</span></span><br><span class="line">    <span class="keyword">const</span> &#123; age &#125; = <span class="title function_">toRefs</span>(user); <span class="comment">// age 为响应式数据</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// readonly 响应式数据类型转普通数据类型</span></span><br><span class="line">    <span class="comment">// const user2 = readonly(user);</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// isRef 判断某属性是否是响应式对象</span></span><br><span class="line">    <span class="keyword">const</span> userIsRef = <span class="title function_">isRef</span>(user);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 定义方法</span></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">add</span> = (<span class="params"></span>)=&gt; count.<span class="property">value</span>++;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 计算属性 */</span></span><br><span class="line">    <span class="comment">// let nameNum = computed(()=&gt; user.name + count.value); // 返回一个不可修改的 ref （只有 get）</span></span><br><span class="line">    <span class="keyword">let</span> nameNum = <span class="title function_">computed</span>(&#123;</span><br><span class="line">      <span class="attr">get</span>: <span class="function">()=&gt;</span> user.<span class="property">name</span> + count.<span class="property">value</span>,</span><br><span class="line">      <span class="attr">set</span>: <span class="function"><span class="params">val</span>=&gt;</span> user.<span class="property">name</span> + count.<span class="property">value</span> + val <span class="comment">// 添加 set 方法后该属性可以修改</span></span><br><span class="line">    &#125;);</span><br><span class="line">    nameNum.<span class="property">value</span> = <span class="number">1</span>; <span class="comment">// 计算属性返回的是一个 ref 对象</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      num, <span class="comment">// 返回原生数据是无法响应式的改变的</span></span><br><span class="line">      count, <span class="comment">// 响应式数据</span></span><br><span class="line">      <span class="comment">// user, // 对象类型响应式数据</span></span><br><span class="line">      ...<span class="title function_">toRefs</span>(user), <span class="comment">// 响应式对象解构为单个的响应式数据</span></span><br><span class="line">      add, <span class="comment">// 与 methods 中方法一样</span></span><br><span class="line">      nameNum, <span class="comment">// 暴露计算属性</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-watch-与-watchEffect："><a href="#3-watch-与-watchEffect：" class="headerlink" title="3. watch 与 watchEffect："></a>3. watch 与 watchEffect：</h3><ol>
<li>监听属性值变化：</li>
</ol>
<p>监听属性方法同样需要导入：<code>import &#123; watch, watchEffect &#125; from &#39;vue&#39;;</code></p>
<p>如下两方法初始时都会默认执行一次，且当方法内的某个属性发生改变时就会执行一次</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watch&quot;</span>, count.<span class="property">value</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// watchEffect 只能默认监听方法中使用到的数据变化局限性大</span></span><br><span class="line"><span class="keyword">const</span> stop = <span class="title function_">watchEffect</span>(<span class="function">(<span class="params">oninvalidate</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watchEffect&quot;</span>, count.<span class="property">value</span>);</span><br><span class="line">    <span class="title function_">oninvalidate</span>(<span class="function">()=&gt;</span>&#123; <span class="comment">// 回调函数</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;before&quot;</span>); <span class="comment">// 在上面代码之前执行</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,&#123; <span class="comment">/* 可选配置参数与 watch 相同 */</span> &#125;);</span><br><span class="line"><span class="title function_">stop</span>(); <span class="comment">// 返回的函数执行将停止监听</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>指定监听：</li>
</ol>
<ul>
<li>watch 参数1 指定要监听的响应式数据</li>
<li>参数2 监听方法，newV 监听的新值, oldV 旧值（默认初始化时为 undefined）</li>
<li>参数3 为监听配置对象，指定监听后默认初始化是不会执行一次的 immediate 为 true 时可以使监听方法初始化时执行一次。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="title function_">ref</span>(<span class="number">9</span>);</span><br><span class="line"><span class="comment">// 监听 a 数据变化（注意这里不需要使用 value）</span></span><br><span class="line"><span class="title function_">watch</span>(a, <span class="function">(<span class="params">newV, oldV</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watch&quot;</span>, count.<span class="property">value</span>); <span class="comment">// count 变化无影响</span></span><br><span class="line">&#125;, &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;); <span class="comment">// 参数3 中的 immediate 默认为 false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听多个属性时使用数组</span></span><br><span class="line"><span class="title function_">watch</span>([a,count],</span><br><span class="line">    <span class="comment">// 监听方法中，第一个数组为新值，第二个数组为旧值</span></span><br><span class="line">    <span class="function">(<span class="params">[newA, newCount], [oldA, oldCount]</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watch&quot;</span>, newA, oldA, newCount, oldCount);</span><br><span class="line">&#125;, &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>监听对象响应式数据的某个属性或想监听响应式数据的 value 时需要使用函数方式返回：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听 a 和 user 的 name 变化（监听 user 整个对象则无需使用函数方式）</span></span><br><span class="line"><span class="title function_">watch</span>([<span class="function">()=&gt;</span>a.<span class="property">value</span>,<span class="function">()=&gt;</span>user.<span class="property">name</span>], <span class="function">(<span class="params">[newA, newName], [oldA, oldName]</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watch&quot;</span>, newA, oldA, newName, oldName);</span><br><span class="line">&#125;, &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>如果监听 ref 且 ref.value 是深层次对象时需要配置 <code>deep: true</code> 开启深层次监听，而 reactive 默认开启：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(refV, <span class="function">(<span class="params">newV, oldV</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 且对象（引用类型）属性值监听它的 newV, oldV 都一样</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">deep</span>: <span class="literal">true</span>, <span class="comment">// 开启深层次监听</span></span><br><span class="line">    <span class="attr">flush</span>: <span class="string">&quot;pre&quot;</span> <span class="comment">// 默认 pre 组件更新前调用，sync 同步执行，post 更新之后</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4-生命周期："><a href="#4-生命周期：" class="headerlink" title="4. 生命周期："></a>4. 生命周期：</h3><p>注意使用以下生命周期 API 也需要导入如：<code>import &#123; onMounted &#125; from &#39;vue&#39;</code></p>
<table>
<thead>
<tr>
<th>选项式 API</th>
<th>Hook inside <code>setup</code></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><code>beforeCreate</code></td>
<td>Not needed*(setup)</td>
<td></td>
</tr>
<tr>
<td><code>created</code></td>
<td>Not needed*(setup)</td>
<td></td>
</tr>
<tr>
<td><code>beforeMount</code></td>
<td><code>onBeforeMount</code></td>
<td>创建之前</td>
</tr>
<tr>
<td><code>mounted</code></td>
<td><code>onMounted</code></td>
<td>创建完成</td>
</tr>
<tr>
<td><code>beforeUpdate</code></td>
<td><code>onBeforeUpdate</code></td>
<td>更新之前</td>
</tr>
<tr>
<td><code>updated</code></td>
<td><code>onUpdated</code></td>
<td>更新完成</td>
</tr>
<tr>
<td><code>beforeUnmount</code></td>
<td><code>onBeforeUnmount</code></td>
<td>卸载（销毁）之前</td>
</tr>
<tr>
<td><code>unmounted</code></td>
<td><code>onUnmounted</code></td>
<td>卸载完成</td>
</tr>
<tr>
<td><code>errorCaptured</code></td>
<td><code>onErrorCaptured</code></td>
<td></td>
</tr>
<tr>
<td><code>renderTracked</code></td>
<td><code>onRenderTracked</code></td>
<td></td>
</tr>
<tr>
<td><code>renderTriggered</code></td>
<td><code>onRenderTriggered</code></td>
<td></td>
</tr>
<tr>
<td><code>activated</code></td>
<td><code>onActivated</code></td>
<td>keep-alive 缓存的组件激活</td>
</tr>
<tr>
<td><code>deactivated</code></td>
<td><code>onDeactivated</code></td>
<td>keep-alive 缓存的组件停用</td>
</tr>
</tbody></table>
<p>当选项 API 与组合式 API 生命周期同时存在时会先执行 setup 中的，也就是先执行组合式 API 生命周期方法。</p>
<h4 id="nextTick："><a href="#nextTick：" class="headerlink" title="nextTick："></a>nextTick：</h4><p><code>$nextTick</code> 在 setup 中使用 <code>nextTick</code> 代替：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; nextTick &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const change = async ()=&gt;&#123;</span><br><span class="line">  await nextTick(); // 同步调用</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-provide-与-inject："><a href="#5-provide-与-inject：" class="headerlink" title="5. provide 与 inject："></a>5. provide 与 inject：</h3><ul>
<li>provide、inject 是 vue 让父组件给子组件提供数据访问的一种方式，使多层子组件（如孙子组件）下依然可以访问到父组件的属性值。</li>
</ul>
<h4 id="1-选项式-API："><a href="#1-选项式-API：" class="headerlink" title="1. 选项式 API："></a>1. 选项式 API：</h4><ol>
<li>如 App.vue 中：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;this is App msg&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">provide</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="variable language_">this</span>.<span class="property">msg</span>, <span class="comment">// 提供 msg 属性</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在第 3 层的子组件中：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 与 props 类似，接收的数据不是响应式的（this.msg = &quot;xx&quot; App.vue 中无变化）</span></span><br><span class="line">  <span class="attr">inject</span>: [<span class="string">&#x27;msg&#x27;</span>], <span class="comment">// 注入父组件的属性（this.msg 或 &#123;&#123;msg&#125;&#125; 访问）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-组合式-API："><a href="#2-组合式-API：" class="headerlink" title="2. 组合式 API："></a>2. 组合式 API：</h4><ol>
<li>App.vue 中：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, provide &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>; <span class="comment">// 引入 provide</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> msg = <span class="title function_">ref</span>(<span class="string">&quot;this is App msg&quot;</span>);</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;msgStr&#x27;</span>, msg); <span class="comment">// 将 msg 提供出去</span></span><br><span class="line">    <span class="comment">// 多个数据使用多个 provide 方法</span></span><br><span class="line">    <span class="keyword">return</span> &#123;msg&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>子组件中：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>; <span class="comment">// 引入 inject</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> msgStr = <span class="title function_">inject</span>(<span class="string">&#x27;msgStr&#x27;</span>); <span class="comment">// 注入（参数二可设置默认值）</span></span><br><span class="line">  <span class="comment">// 需要注入多个使用多个 inject</span></span><br><span class="line">  <span class="keyword">return</span> &#123;msgStr&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组合式 API 使用 provide、inject 注入的父属性是 <strong>响应式</strong> 的，即我们在这里修改 msgStr 的值父组件 msg 也会相应改变。</li>
</ul>
<h3 id="6-VueRouter："><a href="#6-VueRouter：" class="headerlink" title="6. VueRouter："></a>6. VueRouter：</h3><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/composition-api.html">Vue Router 和 组合式 API | Vue Router (vuejs.org)</a></p>
<ul>
<li><code>this.$router</code> 与 <code>this.$route</code> 在 setup 中无法直接访问，因此 VueRouter 提供了 <code>useRouter</code> 和 <code>useRoute</code> 函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRoute, useRouter, onBeforeRouteLeave, onBeforeRouteUpdate &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 注意必须在 setup 最外层获取路由对象</span></span><br><span class="line">    <span class="keyword">const</span> route = <span class="title function_">useRoute</span>(); <span class="comment">// 当前路由对象</span></span><br><span class="line">    <span class="keyword">const</span> router = <span class="title function_">useRouter</span>(); <span class="comment">// 全局路由对象</span></span><br><span class="line">    <span class="comment">// 监听路由参数变化</span></span><br><span class="line">    <span class="title function_">watch</span>(<span class="function">()=&gt;</span>route.<span class="property">params</span>, <span class="function">(<span class="params">newId, oldId</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(newId.<span class="property">id</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 导航守卫函数</span></span><br><span class="line">    <span class="title function_">onBeforeRouteLeave</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>)=&gt;</span> &#123;&#125;);</span><br><span class="line">    <span class="title function_">onBeforeRouteUpdate</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>)=&gt; &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意 useRoute、useRouter（包括 Vuex 的 useStore） 等方法获取对象必须在 setup 中的最外层，如果在方法中使用 useRouter() 会是 undefined。</li>
</ul>
<h3 id="7-Vuex："><a href="#7-Vuex：" class="headerlink" title="7. Vuex："></a>7. Vuex：</h3><p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/guide/composition-api.html">组合式API | Vuex (vuejs.org)</a></p>
<ul>
<li>对于 <code>this.$store</code> Vuex 提供了 <code>useStore</code> 函数</li>
<li>为了访问 <strong>state</strong> 和 <strong>getter</strong>，需要创建 <code>computed</code> 引用以保留响应性，这与在选项式 API 中创建计算属性等效</li>
</ul>
<figure class="highlight plaintext"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useStore &#125; from &#x27;vuex&#x27;; // 引入 useStore</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup () &#123;</span><br><span class="line">    const store = useStore(); // 必须在 setup 最外层获取对象</span><br><span class="line">    // store.commit(&#x27;increment&#x27;) store.dispatch(&#x27;asyncIncrement&#x27;)</span><br><span class="line">    return &#123;</span><br><span class="line">      // 在 computed 函数中访问 state</span><br><span class="line">      count: computed(() =&gt; store.state.count),</span><br><span class="line">      // 在 computed 函数中访问 getter</span><br><span class="line">      double: computed(() =&gt; store.getters.double)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Vite-TS"><a href="#Vite-TS" class="headerlink" title="Vite + TS"></a>Vite + TS</h2><h3 id="创建项目："><a href="#创建项目：" class="headerlink" title="创建项目："></a>创建项目：</h3><ul>
<li><a target="_blank" rel="noopener" href="https://vitejs.dev/">Vite 官网地址（vitejs.dev）</a></li>
<li>npm 创建 Vite 项目：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vite@latest</span><br></pre></td></tr></table></figure>

<ul>
<li>创建 Vite vue3 项目：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vue@latest</span><br></pre></td></tr></table></figure>

<h3 id="Ref-全家桶："><a href="#Ref-全家桶：" class="headerlink" title="Ref 全家桶："></a>Ref 全家桶：</h3><ul>
<li><code>ref</code> 、 <code>Ref</code> 、 <code>isRef</code> ：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, <span class="title class_">Ref</span>, isRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line">type T = &#123;<span class="attr">name</span>: string&#125;</span><br><span class="line"><span class="comment">// 当值是一个复杂类型时使用 Ref 指定类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>:<span class="title class_">Ref</span>&lt;T&gt; = <span class="title function_">ref</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;ruoxijun&#x27;</span>&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isRef</span>(name)); <span class="comment">// 判断是否是 Ref 对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ref 获取 dom 元素</span></span><br><span class="line"><span class="keyword">const</span> myDiv = ref&lt;<span class="title class_">HTMLDivElement</span>&gt;(); <span class="comment">// &lt;div ref=&quot;myDiv&quot;&gt;&lt;/div&gt; ref 值与变量名保持一致</span></span><br><span class="line">myDiv.<span class="property">value</span> <span class="comment">// 因为此时 dom 还未被渲染因此获取不到</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  myDiv.<span class="property">value</span>.<span class="property">innerText</span> = <span class="string">&quot;myDiv&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>shallowRef</code> 与 <code>triggerRef</code>：</li>
</ul>
<p>shallowRef 只支持 <strong>浅层次</strong> 数据响应，注意 ref 底层有调用 triggerRef（如同一方法中同时更改 ref 与 shallowRef 的值时，shallowRef 视图也会被更新）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowRef, triggerRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o = <span class="title function_">shallowRef</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;haha&quot;</span>&#125;);</span><br><span class="line">o.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&quot;xx&quot;</span>; <span class="comment">// 实际值改变，但页面视图不会更新</span></span><br><span class="line"><span class="title function_">triggerRef</span>(o); <span class="comment">// 强制更新</span></span><br><span class="line">o.<span class="property">value</span> = &#123; <span class="attr">name</span>: <span class="string">&quot;oo&quot;</span> &#125;; <span class="comment">// 视图更新</span></span><br></pre></td></tr></table></figure>

<h3 id="Reactive-全家桶："><a href="#Reactive-全家桶：" class="headerlink" title="Reactive 全家桶："></a>Reactive 全家桶：</h3><ul>
<li><code>reactive</code> 与 <code>readonly</code> ：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, readonly &#125; from <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="type">type</span> <span class="variable">T</span> <span class="operator">=</span> string[] <span class="comment">// 与 ref 一样可指定类型</span></span><br><span class="line"><span class="type">const</span> <span class="variable">o</span> <span class="operator">=</span> reactive&lt;T&gt;([]);</span><br><span class="line">o.push(<span class="string">&quot;hh&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="variable">read</span> <span class="operator">=</span> readonly(o);</span><br><span class="line"><span class="comment">// read 只读，但它会收原始对象的 o 的影响，如修改 o 时它的值也改变</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>shallowReactive</code> ：</li>
</ul>
<p>它与 <code>shallowRef</code> 类似提供浅层数据响应，且会被 <code>ref</code> 与 <code>reactive</code> 影响（每次对 ref 或者 reactive 的更改都会将所有的组件模板渲染更新为最新数据）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowReactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title function_">shallowReactive</span>(&#123;<span class="attr">one</span>: &#123;<span class="attr">two</span>: <span class="string">&quot;two&quot;</span>&#125;&#125;);</span><br><span class="line">obj.<span class="property">one</span>.<span class="property">two</span> = <span class="string">&quot;hh&quot;</span>; <span class="comment">// 视图无变化</span></span><br><span class="line">obj.<span class="property">one</span> = &#123;<span class="attr">two</span>: <span class="string">&quot;xx&quot;</span>&#125; <span class="comment">// 视图更新</span></span><br></pre></td></tr></table></figure>

<h3 id="To-全家桶："><a href="#To-全家桶：" class="headerlink" title="To 全家桶："></a>To 全家桶：</h3><ul>
<li><code>toRef</code> 将响应式对象属性提取为 ref：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;ruoxijun&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;);</span><br><span class="line"><span class="keyword">const</span> name = <span class="title function_">toRef</span>(o, <span class="string">&quot;name&quot;</span>); <span class="comment">// 提取响应式对象的某个 key 为 ref</span></span><br><span class="line">name.<span class="property">value</span> = <span class="string">&quot;haha&quot;</span>; <span class="comment">// o.name 值同时改变</span></span><br><span class="line">o.<span class="property">name</span> = <span class="string">&quot;xx&quot;</span>; <span class="comment">// name.value 值同时改变</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>toRefs</code> 将响应式对象的每个属性都转为 ref 对象并解构：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;ruoxijun&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;);</span><br><span class="line"><span class="keyword">const</span> &#123;name, age&#125; = <span class="title function_">toRefs</span>(o);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>toRaw</code> 为响应式对象生成一个普通对象：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;ruoxijun&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;);</span><br><span class="line"><span class="keyword">const</span> obj = <span class="title function_">toRaw</span>(o);</span><br></pre></td></tr></table></figure>

<h3 id="computed："><a href="#computed：" class="headerlink" title="computed："></a>computed：</h3><ul>
<li><code>computed</code> 计算属性：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, <span class="title class_">Ref</span>, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">count</span>: <span class="title class_">Ref</span>&lt;number&gt; = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> con = computed&lt;number&gt;(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> count.<span class="property">value</span> + <span class="number">1</span>; <span class="comment">// 当 count 属性值变化时 con 的值改变</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="less："><a href="#less：" class="headerlink" title="less："></a>less：</h3><ol>
<li>安装 less 到开发环境：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less less-loader -D</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 style 标签上添加 <code>lang=&quot;less&quot;</code> ：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="组件传值："><a href="#组件传值：" class="headerlink" title="组件传值："></a>组件传值：</h3><h4 id="父传子："><a href="#父传子：" class="headerlink" title="父传子："></a>父传子：</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 非 TypeScript</span></span><br><span class="line"><span class="comment">const prop = defineProps(&#123;</span></span><br><span class="line"><span class="comment">  msg:&#123;</span></span><br><span class="line"><span class="comment">    type: String,</span></span><br><span class="line"><span class="comment">    default: &quot;&quot;,</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br><span class="line"><span class="comment">prop.msg // 值可以直接在模板中使用 &#123;&#123; msg &#125;&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const prop = defineProps&lt;&#123; msg: string &#125;&gt;();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 也提供了设置默认值的方式</span></span><br><span class="line"><span class="title function_">withDefaults</span>(defineProps&lt;&#123; <span class="attr">msg</span>: <span class="built_in">string</span> &#125;&gt;(),&#123;</span><br><span class="line">  <span class="attr">msg</span>: <span class="function">()=&gt;</span> <span class="string">&quot;默认值&quot;</span> <span class="comment">// 如果是复杂类型需要使用函数返回方式</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="子传父："><a href="#子传父：" class="headerlink" title="子传父："></a>子传父：</h4><ul>
<li>父组件中：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// 定义接收参数的方法</span><br><span class="line">const send = (msg:string)=&gt; &#123;</span><br><span class="line">  console.log(msg);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt; &lt;!-- 绑定子组件的传参事件 --&gt;</span><br><span class="line">  &lt;HelloWorld @on-click=&quot;send&quot; msg=&quot;Vite + Vue&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>子组件中：</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义组件传参事件名</span></span><br><span class="line"><span class="comment">// const emit = defineEmits([&#x27;on-click&#x27;]);</span></span><br><span class="line"><span class="keyword">const</span> emit = defineEmits&lt;&#123; <span class="comment">// TypeScript 方式定义</span></span><br><span class="line">  (<span class="attr">e</span>: <span class="string">&quot;on-click&quot;</span>, <span class="attr">msg</span>: <span class="title class_">String</span>):<span class="built_in">void</span></span><br><span class="line">&#125;&gt;();</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">send</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">// 向指定事件传递参数</span></span><br><span class="line">  <span class="title function_">emit</span>(<span class="string">&quot;on-click&quot;</span>, <span class="string">&quot;传参值&quot;</span>); <span class="comment">// 可多个参数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="暴露组件属性："><a href="#暴露组件属性：" class="headerlink" title="暴露组件属性："></a>暴露组件属性：</h4><ul>
<li>子组件中：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 暴露组件的属性</span></span><br><span class="line"><span class="title function_">defineExpose</span>(&#123;</span><br><span class="line">  count,</span><br><span class="line">  send</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>父组件中：</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;HelloWorld ref=&quot;hello&quot;/&gt;</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="title function_">ref</span>();</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(hello.<span class="property">value</span>.<span class="property">count</span>); <span class="comment">// 获取使用组件中的属性</span></span><br><span class="line">  hello.<span class="property">value</span>.<span class="title function_">send</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="递归组件："><a href="#递归组件：" class="headerlink" title="递归组件："></a>递归组件：</h4><ol>
<li>使用递归组件：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import Tree from &quot;./components/Tree.vue&quot;; // 引入递归组件</span><br><span class="line"></span><br><span class="line">interface Tree &#123; // 定义递归数据类型</span><br><span class="line">  name: string;</span><br><span class="line">  checked: boolean;</span><br><span class="line">  children?: Tree[];</span><br><span class="line">&#125;</span><br><span class="line">const data = reactive&lt;Tree[]&gt;([ // 递归数据</span><br><span class="line">  &#123;</span><br><span class="line">    name: &quot;1&quot;,</span><br><span class="line">    checked: false,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;1-1&quot;,</span><br><span class="line">        checked: true,</span><br><span class="line">        children: [],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: &quot;2&quot;,</span><br><span class="line">    checked: false,</span><br><span class="line">    children: [],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: &quot;3&quot;,</span><br><span class="line">    checked: true,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;3-1&quot;,</span><br><span class="line">        checked: false,</span><br><span class="line">        children: [</span><br><span class="line">          &#123;</span><br><span class="line">            name: &quot;3-1-1&quot;,</span><br><span class="line">            checked: true,</span><br><span class="line">            children: [],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt; &lt;!-- 使用递归组件并传入递归数据 --&gt;</span><br><span class="line">    &lt;Tree :data=&quot;data&quot;&gt;&lt;/Tree&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>实现递归组件 Tree.vue ：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-for=&quot;item in data&quot; @click.stop=&quot;treeClick($event)&quot; class=&quot;tree&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; v-model=&quot;item.checked&quot;&gt;&lt;span&gt;&#123;&#123; item.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;!-- 当前组件递归，v-if 停止递归条件 --&gt;</span><br><span class="line">    &lt;Tree v-if=&quot;item?.children?.length&quot; :data=&quot;item?.children&quot;&gt;&lt;/Tree&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  interface Tree &#123; // 递归数据类型</span><br><span class="line">    name: string;</span><br><span class="line">    checked: boolean;</span><br><span class="line">    children?: Tree[];</span><br><span class="line">  &#125;</span><br><span class="line">  const props = defineProps&lt;&#123;</span><br><span class="line">    data?: Tree[] // 接收递归数据</span><br><span class="line">  &#125;&gt;();</span><br><span class="line">  </span><br><span class="line">  const treeClick = (e: Event)=&gt; &#123;</span><br><span class="line">    console.log(e.currentTarget);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Tree&quot; // 默认使用文件名作为组件名</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.tree&#123;</span><br><span class="line">  margin-left: 25px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>可选链操作符：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(&#123;&#125;).<span class="property">a</span> <span class="comment">// undefined</span></span><br><span class="line">(&#123;&#125;).<span class="property">a</span>.<span class="property">b</span> <span class="comment">// 报错</span></span><br><span class="line">(&#123;&#125;)?.<span class="property">a</span>?.<span class="property">b</span> <span class="comment">// undefined</span></span><br><span class="line">(<span class="literal">null</span> || <span class="literal">undefined</span>) ?? [] <span class="comment">// [] （只针对 null、undefined）</span></span><br></pre></td></tr></table></figure>

<h4 id="v-model"><a href="#v-model" class="headerlink" title="v-model:"></a>v-model:</h4><ol>
<li>父组件中：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import A from &quot;./components/A.vue&quot;;</span><br><span class="line"></span><br><span class="line">const isShow = ref&lt;boolean&gt;(true);</span><br><span class="line">const text = ref&lt;string&gt;(&quot;hello&quot;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt; 父组件 - isShow:&#123;&#123;isShow&#125;&#125; - text:&#123;&#123;text&#125;&#125; &lt;/div&gt;</span><br><span class="line">  &lt;div&gt; &lt;button @click=&quot;isShow = !isShow&quot;&gt; 开关 &lt;/button&gt; &lt;/div&gt;</span><br><span class="line">  &lt;A v-model=&quot;isShow&quot; v-model:textVal=&quot;text&quot;&gt;&lt;/A&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>子组件中：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if=&quot;modelValue&quot;&gt;</span><br><span class="line">    &lt;div&gt; A - isShow:&#123;&#123;modelValue&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;input :value=&quot;textVal&quot; @input=&quot;textValChange&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;close&quot;&gt; 关闭 &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">  modelValue: boolean, // v-model 默认为 modelValue 接收</span><br><span class="line">  textVal: string // 接收 v-model:textVal</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const emits = defineEmits([&#x27;update:modelValue&#x27;, &#x27;update:textVal&#x27;]);</span><br><span class="line">const close = ()=&gt;&#123;</span><br><span class="line">  emits(&#x27;update:modelValue&#x27;, false);</span><br><span class="line">&#125;</span><br><span class="line">const textValChange = (e:Event)=&gt;&#123;</span><br><span class="line">  // e.target 默认 EventTarget 类型需要断言为 HTMLInputElement 才能获取到 value 值</span><br><span class="line">  const el = e.target as HTMLInputElement;</span><br><span class="line">  emits(&#x27;update:textVal&#x27;, el.value);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>自定义修饰符：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> props = defineProps&lt;&#123;</span><br><span class="line">  <span class="attr">modelValue</span>: boolean, <span class="comment">// v-model 默认为 modelValue 接收</span></span><br><span class="line">  <span class="attr">textVal</span>: string <span class="comment">// 接收 v-model:textVal</span></span><br><span class="line">  textValModifiers?:&#123; <span class="comment">// v-model: 后面的名字+Modifiers</span></span><br><span class="line">    <span class="attr">isAdd</span>: boolean <span class="comment">// 自定义修饰符名</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;&gt;();</span><br></pre></td></tr></table></figure>

<p>组件上 <code>v-model:textVal.isAdd=&quot;text&quot;</code> ，组件内 <code>props?.textValModifiers?.isAdd</code> 有使用修饰符值为 true 。</p>
<h3 id="动态组件："><a href="#动态组件：" class="headerlink" title="动态组件："></a>动态组件：</h3><h4 id="使用方式："><a href="#使用方式：" class="headerlink" title="使用方式："></a>使用方式：</h4><ol>
<li>对象方式实现动态组件：</li>
</ol>
<ul>
<li>如果使用 <code>ref</code> 或者 <code>reactive</code> 包装组件 vue 会代理组件属性监听变化，而这会耗费性能且 vue 会在控制台给出警告。因此建议在对象中使用 <code>markRaw</code> 包裹组件而普通变量使用 <code>shallowRef</code> 包裹组件。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive, markRaw, shallowRef &#125; from &quot;vue&quot;;</span><br><span class="line">import A from &quot;./components/A.vue&quot;;</span><br><span class="line">import B from &quot;./components/B.vue&quot;;</span><br><span class="line">import C from &quot;./components/C.vue&quot;;</span><br><span class="line">interface o &#123; name: string; com: any; &#125;</span><br><span class="line"></span><br><span class="line">const comIndex = ref(0);</span><br><span class="line">const componentId = shallowRef(A); // 不建议使用 ref</span><br><span class="line">const data = reactive&lt;o[]&gt;([</span><br><span class="line">  &#123; name: &quot;A&quot;, com: markRaw(A), &#125;, // 使用 markRaw 包裹</span><br><span class="line">  &#123; name: &quot;B&quot;, com: markRaw(B), &#125;,</span><br><span class="line">  &#123; name: &quot;C&quot;, com: markRaw(C), &#125;,</span><br><span class="line">]);</span><br><span class="line">const swTab = (com: any, index: number)=&gt;&#123;</span><br><span class="line">  componentId.value = com;</span><br><span class="line">  comIndex.value = index;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tab&quot;&gt;</span><br><span class="line">    &lt;div :class=&quot;&#123; active: comIndex === index &#125;&quot; class=&quot;tab_item&quot;</span><br><span class="line">      @click=&quot;swTab(item.com, index)&quot;</span><br><span class="line">      v-for=&quot;(item, index) in data&quot; &gt;</span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;component :is=&quot;componentId&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>字符串方式实现动态组件：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">interface o &#123; name: string; com: any; &#125;</span><br><span class="line"></span><br><span class="line">const comIndex = ref(0);</span><br><span class="line">const componentId = ref(&quot;A&quot;); // 使用组件字符串名</span><br><span class="line">const data = reactive&lt;o[]&gt;([</span><br><span class="line">  &#123; name: &quot;A&quot;, com: &quot;A&quot;, &#125;,</span><br><span class="line">  &#123; name: &quot;B&quot;, com: &quot;B&quot;, &#125;,</span><br><span class="line">  &#123; name: &quot;C&quot;, com: &quot;C&quot;, &#125;,</span><br><span class="line">]);</span><br><span class="line">const swTab = (com: any, index: number)=&gt;&#123;</span><br><span class="line">  componentId.value = com;</span><br><span class="line">  comIndex.value = index;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import A from &quot;./components/A.vue&quot;;</span><br><span class="line">import B from &quot;./components/B.vue&quot;;</span><br><span class="line">import C from &quot;./components/C.vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components:&#123; A, B, C &#125;// 注册组件</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="异步组件："><a href="#异步组件：" class="headerlink" title="异步组件："></a>异步组件：</h4><ul>
<li>异步导入组件：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import A from &quot;./components/A.vue&quot;;</span></span><br><span class="line"><span class="keyword">const</span> A = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./components/A.vue&quot;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="transition："><a href="#transition：" class="headerlink" title="transition："></a>transition：</h3><h4 id="基础使用："><a href="#基础使用：" class="headerlink" title="基础使用："></a>基础使用：</h4><ol>
<li>使用 <code>transition</code> 标签包裹需要添加动画的元素， <strong>name</strong> 的值是定义动画 class 的前缀：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;fade&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;componentId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>定义动画：</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 显示 */</span></span><br><span class="line"><span class="selector-class">.fade-enter-from</span>&#123; <span class="attribute">opacity</span>: <span class="number">0</span>; &#125; <span class="comment">/* 进入之前 */</span></span><br><span class="line"><span class="selector-class">.fade-enter-active</span>&#123; <span class="attribute">transition</span>: all .<span class="number">5s</span> ease; &#125; <span class="comment">/* 过度曲线 */</span></span><br><span class="line"><span class="selector-class">.fade-enter-to</span>&#123; <span class="attribute">opacity</span>: <span class="number">1</span>; &#125; <span class="comment">/* 结束 */</span></span><br><span class="line"><span class="comment">/* 隐藏 */</span></span><br><span class="line"><span class="selector-class">.fade-leave-from</span>&#123; <span class="attribute">opacity</span>: <span class="number">1</span>; &#125;</span><br><span class="line"><span class="selector-class">.fade-leave-active</span>&#123; <span class="attribute">transition</span>: all .<span class="number">5s</span> ease; &#125;</span><br><span class="line"><span class="selector-class">.fade-leave-to</span>&#123; <span class="attribute">opacity</span>: <span class="number">0</span>; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="animate-css："><a href="#animate-css：" class="headerlink" title="animate.css："></a>animate.css：</h4><ul>
<li><code>transition</code> 也支持指定动画的 class 名：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span></span></span><br><span class="line"><span class="tag">    <span class="attr">enter-active-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">enter-from-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">enter-to-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">leave-active-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">leave-from-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">leave-to-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;componentId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>安装 animate.css：</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://animate.style/">Animate.css 官网</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install animate.css</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在组件中引入 animate.css：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;animate.css&quot;;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用：</li>
</ol>
<p>新版中都需要添加 animate__animated 类， <code>duration</code> 属性可以指定执行时间（毫秒），还可通过对象属性方式单独设置显示和隐藏的动画时间 <code>&#123;enter: 500, leave: 500&#125;</code> 。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:duration</span>=<span class="string">&quot;500&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">enter-active-class</span>=<span class="string">&quot;animate__animated animate__rubberBand&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">leave-active-class</span>=<span class="string">&quot;animate__animated animate__swing&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;componentId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="生命周期："><a href="#生命周期：" class="headerlink" title="生命周期："></a>生命周期：</h4><table>
<thead>
<tr>
<th>生命周期方法</th>
<th>对应 Class</th>
<th>时期</th>
</tr>
</thead>
<tbody><tr>
<td>@before-enter</td>
<td>enter-from-class</td>
<td>显示动画之前</td>
</tr>
<tr>
<td>@enter</td>
<td>enter-active-class</td>
<td>显示过度</td>
</tr>
<tr>
<td>@after-enter</td>
<td>enter-to-class</td>
<td>显示结束</td>
</tr>
<tr>
<td>@enter-cancelled</td>
<td></td>
<td>显示过度被打断</td>
</tr>
<tr>
<td>@before-leave</td>
<td>leave-from-class</td>
<td>隐藏动画之前</td>
</tr>
<tr>
<td>@leave</td>
<td>leave-active-class</td>
<td>隐藏过度</td>
</tr>
<tr>
<td>@after-leave</td>
<td>leave-to-class</td>
<td>隐藏结束</td>
</tr>
<tr>
<td>@leave-cancelled</td>
<td></td>
<td>隐藏过度被打断</td>
</tr>
</tbody></table>
<ul>
<li>所有生命周期方法参数 1 是动画元素对象，而 <strong>过度方法</strong> 接收参数 <strong>2</strong> 它是过度回调代表过度执行完成，默认它在动画结束后自动执行。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">enterActive</span> = (<span class="params">el: Element, done: <span class="built_in">Function</span></span>)=&gt;&#123;</span><br><span class="line">  <span class="title function_">done</span>(); <span class="comment">// 过度完成</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="appear："><a href="#appear：" class="headerlink" title="appear："></a>appear：</h4><ul>
<li>appear 页面初次加载效果，只在页面初始化后执行一次：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span></span></span><br><span class="line"><span class="tag">    <span class="attr">appear-from-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">appear-active-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">appear-to-class</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;componentId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="TransitionGroup："><a href="#TransitionGroup：" class="headerlink" title="TransitionGroup："></a>TransitionGroup：</h4><ul>
<li>为列表添加动画属性，使用方式与 transition 大体一致。</li>
<li>默认不会给列表多包装一层，可使用 <code>tag</code> 属性指定包装一层元素。</li>
<li>列表必须添加 <code>key</code> 属性。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition-group</span></span></span><br><span class="line"><span class="tag">  <span class="attr">tag</span>=<span class="string">&quot;div&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">enter-active-class</span>=<span class="string">&quot;animate__animated animate__wobble&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">leave-active-class</span>=<span class="string">&quot;animate__animated animate__rubberBand&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">move-class</span>=<span class="string">&quot;列表元素平移动画（元素位置改变）&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">key</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="gsap-js："><a href="#gsap-js：" class="headerlink" title="gsap.js："></a>gsap.js：</h4><ul>
<li>安装：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gsap</span><br></pre></td></tr></table></figure>

<ul>
<li>使用：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import gsap from &quot;gsap&quot;;</span><br><span class="line">const number = reactive(&#123;</span><br><span class="line">  numberVal: 0,</span><br><span class="line">  showNumber: 0</span><br><span class="line">&#125;);</span><br><span class="line">const numberChange = (n: number)=&gt;&#123;</span><br><span class="line">  gsap.to(number, &#123;</span><br><span class="line">    duration: 0.3, // 过度时间</span><br><span class="line">    showNumber: n // 注意该属性名与显示动画的属性值名要相同</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;number&quot; v-model=&quot;number.numberVal&quot; @input=&quot;numberChange(number.numberVal)&quot; &gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; number.showNumber.toFixed(0) &#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Mitt"><a href="#Mitt" class="headerlink" title="Mitt:"></a>Mitt:</h3><ul>
<li>vue 中 <code>import</code> 第一次加载文件时执行 js 并将获取到的内容放入缓存中，之后 import 文件都是从缓存中获取，因此 import 获取的对象实例都是 <strong>单例</strong> 。</li>
</ul>
<ol>
<li>安装 mitt：</li>
</ol>
<p>Vue2 使用 EventBus 进行组件通信，而 Vue3 推荐使用 mitt 。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mitt -S</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>main.ts 中全局挂载：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span>; <span class="comment">// 引入</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Mitt</span> = <span class="title function_">mitt</span>(); <span class="comment">// 执行</span></span><br><span class="line"><span class="comment">// TypeScript 类型注册，才能获得提示</span></span><br><span class="line">declare <span class="variable language_">module</span> <span class="string">&quot;vue&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">export</span> interface <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="attr">$Bus</span>: <span class="keyword">typeof</span> <span class="title class_">Mitt</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// vue3 挂载全局 API</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$Bus</span> = <span class="title class_">Mitt</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>组件中使用：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* A.vue 中 */</span></span><br><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="title function_">getCurrentInstance</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">emit</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">// emit(自定义事件, ...参数);</span></span><br><span class="line">  instance?.<span class="property">proxy</span>?.<span class="property">$Bus</span>.<span class="title function_">emit</span>(<span class="string">&quot;on-emit&quot;</span>, <span class="string">&quot;传递参数值（可多个）&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* B.vue 中 */</span></span><br><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="title function_">getCurrentInstance</span>();</span><br><span class="line"><span class="comment">// on(监听事件, 回调函数(接收参数));</span></span><br><span class="line">instance?.<span class="property">proxy</span>?.<span class="property">$Bus</span>.<span class="title function_">on</span>(<span class="string">&quot;on-emit&quot;</span>,<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 监听所有事件，回调函数参数 1 是事件类型，之后参数为接收的参数值</span></span><br><span class="line">instance?.<span class="property">proxy</span>?.<span class="property">$Bus</span>.<span class="title function_">on</span>(<span class="string">&quot;*&quot;</span>,<span class="function">(<span class="params">type,data</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(type, data);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// instance?.proxy?.$Bus.off(&quot;on-emit&quot;, function); // 删除某监听事件</span></span><br><span class="line"><span class="comment">// instance?.proxy?.$Bus.all.clear(); // 删除所有监听事件</span></span><br></pre></td></tr></table></figure>

<h3 id="unplugin-auto-import："><a href="#unplugin-auto-import：" class="headerlink" title="unplugin-auto-import："></a>unplugin-auto-import：</h3><p><a target="_blank" rel="noopener" href="https://github.com/antfu/unplugin-auto-import">antfu&#x2F;unplugin-auto-import</a></p>
<ol>
<li>安装：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D unplugin-auto-import</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置 vite.config.ts ：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">    <span class="attr">imports</span>: [<span class="string">&#x27;vue&#x27;</span>], <span class="comment">// 自动导入项</span></span><br><span class="line">    <span class="attr">dts</span>: <span class="string">&#x27;src/auto-import.d.ts&#x27;</span> <span class="comment">// 声明文件位置</span></span><br><span class="line">  &#125;),]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>不用 import 在组件中直接使用 ref 等。</li>
</ol>
<h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令:"></a>自定义指令:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Directive, DirectiveBinding, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import A from &quot;./components/A.vue&quot;;</span><br><span class="line"></span><br><span class="line">type Dir = &#123; val: string &#125;</span><br><span class="line">// 自定义指令 v-my,赋值函数方式是 mounted 与 updated 同时触发相同行为的简写</span><br><span class="line">const vMy:Directive = (el, binding:DirectiveBinding&lt;Dir&gt;)=&gt; &#123;</span><br><span class="line">  console.log(binding.value.val);</span><br><span class="line">&#125;</span><br><span class="line">/* 完整写法与生命周期：</span><br><span class="line">const vMy:Directive = &#123;</span><br><span class="line">  created()&#123;&#125;,</span><br><span class="line">  beforeMount()&#123;&#125;,</span><br><span class="line">  mounted()&#123;&#125;,</span><br><span class="line">  beforeUpdate()&#123;&#125;,</span><br><span class="line">  updated()&#123;&#125;,</span><br><span class="line">  beforeUnmount()&#123;&#125;,</span><br><span class="line">  unmounted()&#123;&#125;,</span><br><span class="line">&#125; */</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;A v-my=&quot;&#123;val: &#x27;hello&#x27;&#125;&quot;&gt;&lt;/A&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Hooks："><a href="#Hooks：" class="headerlink" title="Hooks："></a>Hooks：</h3><h4 id="Mixins"><a href="#Mixins" class="headerlink" title="Mixins:"></a>Mixins:</h4><p>在 vue2 中常使用 Mixins 抽取公共属性，mixins 中的属性会被组件中的同名属性覆盖，mixins 中的生命周期函数会比组件中同名生命周期函数先执行（不会覆盖）。</p>
<ul>
<li>mixins.js （名称可自定义）中：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;...&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组件中使用：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import mixin from &#x27;./mixins&#x27;; // 引入 mixins.js</span><br><span class="line">export default &#123;</span><br><span class="line">    mixins:[mixin], // mixins 数组，属性自动注入组件中</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Hooks：-1"><a href="#Hooks：-1" class="headerlink" title="Hooks："></a>Hooks：</h4><p>在 vue3 中推荐使用 Hooks 使用函数导出与引入的方式。</p>
<ul>
<li>hooks&#x2F;index.ts （名称可自定义）中：</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Ref</span>, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>; <span class="comment">// 与组件中一样可引入属性</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>):<span class="title class_">Ref</span>&lt;<span class="built_in">string</span>&gt;&#123;</span><br><span class="line">  <span class="keyword">const</span> hello = <span class="title function_">ref</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> hello;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在组件中：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hook <span class="keyword">from</span> <span class="string">&quot;./hooks&quot;</span>; <span class="comment">// 引入</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hello = <span class="title function_">hook</span>(); <span class="comment">// 使用</span></span><br></pre></td></tr></table></figure>

<h3 id="定义全局变量："><a href="#定义全局变量：" class="headerlink" title="定义全局变量："></a>定义全局变量：</h3><h4 id="vue2："><a href="#vue2：" class="headerlink" title="vue2："></a>vue2：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$my</span> = <span class="string">&quot;hello&quot;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="vue3："><a href="#vue3：" class="headerlink" title="vue3："></a>vue3：</h4><ul>
<li>main.ts 中：</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 类型注册，才能获得提示，且编辑器不报错</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&quot;vue&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="attr">$My</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">$MyFun</span>: <span class="title class_">Function</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// vue3 定义全局变量或函数</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$My</span> = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$MyFun</span> = <span class="function">()=&gt;</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>组件中：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; getCurrentInstance &#125; from &quot;vue&quot;;</span><br><span class="line">const app = getCurrentInstance(); // 获取当前实例</span><br><span class="line">app?.proxy?.$MyFun();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt; 直接调用 - &#123;&#123; $My &#125;&#125; &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="样式穿透："><a href="#样式穿透：" class="headerlink" title="样式穿透："></a>样式穿透：</h3><ul>
<li>vue2 中使用 <code>/deep/</code> ：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/deep/<span class="selector-class">.el-switch__core</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>vue3 推荐使用 <code>:deep()</code> ：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:<span class="built_in">deep</span>(.el-switch__core) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>:slotted()</code> 插槽选择器</p>
</li>
<li><p><code>:global()</code> 全局选择器</p>
</li>
<li><p>动态 css：</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const color = ref&lt;string&gt;(&quot;red&quot;);</span><br><span class="line">const style = ref(&#123; color: &quot;red&quot; &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">div&#123;</span><br><span class="line">  color: v-bind(color);</span><br><span class="line">  background-color: v-bind(&#x27;style.color&#x27;); // 对象需要引号方式包裹</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><h3 id="安装使用："><a href="#安装使用：" class="headerlink" title="安装使用："></a>安装使用：</h3><p>Pinia 官网地址：<a target="_blank" rel="noopener" href="https://pinia.vuejs.org/">Pinia (vuejs.org)</a></p>
<ol>
<li>安装 Pinia：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia -S</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 main.ts 中注册引入：</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>; <span class="comment">// 引入 Pinia</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createPinia</span>(); <span class="comment">// 创建</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(store); <span class="comment">// 注册 Pinia</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 store\index.ts 内：</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;main&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">()=&gt;</span>(&#123;</span><br><span class="line">    <span class="comment">// 如 data</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;haha&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="comment">// 如 computed</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">// 如 methods ， 主要提交 state（同步异步均可）</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>组件中使用：</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">useStore</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>

<h3 id="state"><a href="#state" class="headerlink" title="state:"></a>state:</h3><h4 id="1-直接修改："><a href="#1-直接修改：" class="headerlink" title="1. 直接修改："></a>1. 直接修改：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="property">name</span> = <span class="string">&quot;ruoxijun&quot;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-patch（推荐）："><a href="#2-patch（推荐）：" class="headerlink" title="2. $patch（推荐）："></a>2. $patch（推荐）：</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象方式 $patch(&#123;&#125;)</span></span><br><span class="line">store.$patch(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;aaa&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 函数方式 $patch(state=&gt;&#123;&#125;) 推荐</span></span><br><span class="line">store.$patch(<span class="function">(<span class="params">state:<span class="built_in">any</span></span>)=&gt;</span>&#123;</span><br><span class="line">  state.<span class="property">name</span> = <span class="string">&quot;ooo&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="3-state："><a href="#3-state：" class="headerlink" title="3. $state："></a>3. $state：</h4><p>此方式需要修改 state 中的所有属性，才能使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="property">$state</span> = &#123; <span class="attr">name</span>: <span class="string">&quot;ccc&quot;</span> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-actions（推荐）："><a href="#4-actions（推荐）：" class="headerlink" title="4. actions（推荐）："></a>4. actions（推荐）：</h4><ol>
<li>在 store 的 actions 中定义方法：</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;main&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">()=&gt;</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;haha&quot;</span> &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">// 使用方法修改 state 中的属性</span></span><br><span class="line">    <span class="title function_">setName</span>(<span class="attr">name</span>: <span class="built_in">string</span>): <span class="built_in">void</span>&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在组件中使用方法：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">setName</span>(<span class="string">&quot;ddd&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="5-storeToRefs："><a href="#5-storeToRefs：" class="headerlink" title="5. storeToRefs："></a>5. storeToRefs：</h4><p>store 可以直接解构出 state 中的属性但不具有响应式，因此 Pinia 提供了 storeToRefs：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; name &#125; = <span class="title function_">storeToRefs</span>(store);</span><br><span class="line">name.<span class="property">value</span> = <span class="string">&quot;yyy&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="getters、actions："><a href="#getters、actions：" class="headerlink" title="getters、actions："></a>getters、actions：</h3><p>getters、actions 中定义的方法可以使用 this 调用 store 中的属性或方法。</p>
<h3 id="API："><a href="#API：" class="headerlink" title="API："></a>API：</h3><h4 id="reset："><a href="#reset：" class="headerlink" title="$reset："></a>$reset：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.$reset(); <span class="comment">// 重置 state</span></span><br></pre></td></tr></table></figure>

<h4 id="subscribe："><a href="#subscribe：" class="headerlink" title="$subscribe："></a>$subscribe：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听 state 变化，有属性值改变时触发</span></span><br><span class="line">store.$subscribe(<span class="function">(<span class="params">mutations, state</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(mutations, state);</span><br><span class="line">&#125;, &#123; <span class="attr">detached</span>: <span class="literal">true</span> &#125;);  <span class="comment">// 参数 2 （可选）表示组件销毁后，依然执行此监听</span></span><br></pre></td></tr></table></figure>

<h4 id="onAction："><a href="#onAction：" class="headerlink" title="$onAction："></a>$onAction：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听 actions 调用</span></span><br><span class="line">store.$onAction(<span class="function">(<span class="params">context</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(context);</span><br><span class="line">&#125;, <span class="literal">true</span>); <span class="comment">// 参数 2 （可选）表示组件销毁后，依然执行此监听</span></span><br></pre></td></tr></table></figure>

<h3 id="持久化存储："><a href="#持久化存储：" class="headerlink" title="持久化存储："></a>持久化存储：</h3></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">ruoxijun</div><div class="post-copyright__author_desc">若惜君</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://ruoxijun.top/2022/02/12/vue/vue3/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://ruoxijun.top/2022/02/12/vue/vue3/')">Vue3</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://ruoxijun.top/2022/02/12/vue/vue3/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Vue3&amp;url=http://ruoxijun.top/2022/02/12/vue/vue3/&amp;pic=https://www.ruoxijun.top/getRandomImageR2?_r_=6fd8dffc-5ad9-adcc-64a0-5e5f21497251" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/axios/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>axios<span class="tagsPageCount">3</span></a><a class="post-meta__box__tags" href="/tags/vue3/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>vue3<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/es6/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>es6<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/vuex/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>vuex<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/webpack/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>webpack<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/npm/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>npm<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/vueRouter/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>vueRouter<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://www.ruoxijun.top/getRandomImageR2?_r_=50921c90-c577-0c73-1e9f-153cc3a425ca" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/09/06/java/javaweb/ssh/struts2%E9%80%9F%E8%A7%88/"><img class="prev-cover" src="https://www.ruoxijun.top/getRandomImageR2?_r_=c70c8062-49e6-da72-27bc-aaa017ae9951" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">struts2速览</div></div></a></div><div class="next-post pull-right"><a href="/2022/07/09/vue/TypeScript/"><img class="next-cover" src="https://www.ruoxijun.top/getRandomImageR2?_r_=b4db9fb9-f7e6-ade3-df0e-fa228cd5c2cc" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">TypeScript</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2022/07/09/vue/TypeScript/" title="TypeScript"><img class="cover" src="https://www.ruoxijun.top/getRandomImageR2?_r_=b4db9fb9-f7e6-ade3-df0e-fa228cd5c2cc" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2024-09-14</div><div class="title">TypeScript</div></div></a></div><div><a href="/2021/08/30/vue/vue%E4%B8%8EElementUI/" title="Vue与ElementUI"><img class="cover" src="https://www.ruoxijun.top/getRandomImageR2?_r_=a6bf483f-f729-311e-f1b5-b4ac98f51d92" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2024-09-14</div><div class="title">Vue与ElementUI</div></div></a></div><div><a href="/2020/05/25/html/axios/" title="Axios 基础"><img class="cover" src="https://www.ruoxijun.top/getRandomImageR2?_r_=0e7cc60f-2ce5-82bb-ee62-b68d8e3fc855" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2024-09-14</div><div class="title">Axios 基础</div></div></a></div><div><a href="/2021/08/27/vue/vue/" title="Vue 基础"><img class="cover" src="https://www.ruoxijun.top/getRandomImageR2?_r_=6d7e494c-8027-d089-973f-cd976def92c2" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2024-09-14</div><div class="title">Vue 基础</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> Comment</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-switch"><span class="first-comment">Twikoo</span><span id="switch-btn"></span><span class="second-comment">Waline</span></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div id="waline-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><span>最是人间留不住，<br/>朱颜辞镜花辞树。<span></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">ruoxijun</h1><div class="author-info__desc">若惜君</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://ruoxijun.top/" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3"><span class="toc-number">1.</span> <span class="toc-text">Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Npm"><span class="toc-number">1.1.</span> <span class="toc-text">Npm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-npm-nodejs-%E5%AE%89%E8%A3%85%EF%BC%9A"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. npm(nodejs) 安装：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%EF%BC%9A"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">安装：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npm-%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%EF%BC%9A"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">npm 配置修改：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">常用命令：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Package-json%EF%BC%9A"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. Package.json：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack"><span class="toc-number">1.2.</span> <span class="toc-text">Webpack</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 安装与使用：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8C%85-js-%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">打包 js 文件：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 核心配置：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9%EF%BC%9A"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">1. 配置选项：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A4%9A%E5%85%A5%E5%8F%A3%E5%A4%9A%E5%87%BA%E5%8F%A3%EF%BC%9A"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2. 多入口多出口：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%89%93%E5%8C%85-HTML-%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">3. 打包 HTML 文件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%89%93%E5%8C%85-CSS-%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">4. 打包 CSS 文件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%89%93%E5%8C%85%E5%9B%BE%E7%89%87%E3%80%81%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87%EF%BC%8Ceslint-js%E8%AF%AD%E6%B3%95%E6%A3%80%E6%9F%A5-%E7%95%A5-%EF%BC%9A"><span class="toc-number">1.2.3.5.</span> <span class="toc-text">5. 打包图片、字体图标，eslint js语法检查(略)：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-DevServer%EF%BC%9A"><span class="toc-number">1.2.3.6.</span> <span class="toc-text">6. DevServer：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%8E%BB%E9%99%A4%E6%97%A0%E7%94%A8%E7%9A%84-js%E3%80%81css-%E7%95%A5-%EF%BC%9A"><span class="toc-number">1.2.3.7.</span> <span class="toc-text">7. 去除无用的 js、css (略)：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES6-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">ES6 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-let%E3%80%81const-%EF%BC%9A"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. let、const ：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E4%B8%8E-this-%E6%8C%87%E5%90%91%EF%BC%9A"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 箭头函数与 this 指向：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 数组方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Module-%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%9A"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. Module 模块化：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-main-html-%E4%B8%AD%E5%BC%95%E5%85%A5%E4%B8%BB-main-js-%EF%BC%9A"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">1. main.html 中引入主 main.js ：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-export-%E5%92%8C-import-%EF%BC%9A"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">2. export 和 import ：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Axios"><span class="toc-number">1.4.</span> <span class="toc-text">Axios</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ES6-Promise%EF%BC%9A"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. ES6 Promise：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 简单使用:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%B0%81%E8%A3%85%EF%BC%9A"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 全局配置与封装：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9A"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. 拦截器：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-1"><span class="toc-number">1.5.</span> <span class="toc-text">Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9D%E8%AF%86-vue3"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 初识 vue3:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-vue-cli%EF%BC%9A"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. vue-cli：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%91%BD%E4%BB%A4%E9%A1%BB%E7%9F%A5%EF%BC%9A"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">1. 命令须知：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA%EF%BC%9A"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">2. 项目创建：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-vue-config-js"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">3. vue.config.js:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Vue3-%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. Vue3 语法：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">1. 基础语法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-v-bind%EF%BC%9A"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">2. v-bind：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-computed%EF%BC%9A"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">3. computed：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-v-on%EF%BC%9A"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">4. v-on：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-v-for%EF%BC%9A"><span class="toc-number">1.5.3.5.</span> <span class="toc-text">5. v-for：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-v-model%EF%BC%9A"><span class="toc-number">1.5.3.6.</span> <span class="toc-text">6. v-model：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-watch"><span class="toc-number">1.5.3.7.</span> <span class="toc-text">7. watch:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-Teleport%EF%BC%9A"><span class="toc-number">1.5.3.8.</span> <span class="toc-text">8. Teleport：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-component%EF%BC%9A"><span class="toc-number">1.5.3.9.</span> <span class="toc-text">9. component：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%9A"><span class="toc-number">1.5.4.</span> <span class="toc-text">4. 组件化开发：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">1. 创建组件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">2. 引用组件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-props%EF%BC%88%E7%88%B6%E4%BC%A0%E5%AD%90%EF%BC%89%EF%BC%9A"><span class="toc-number">1.5.4.3.</span> <span class="toc-text">3. props（父传子）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-emit%EF%BC%88%E5%AD%90%E4%BC%A0%E7%88%B6%EF%BC%89%EF%BC%9A"><span class="toc-number">1.5.4.4.</span> <span class="toc-text">4. $emit（子传父）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%88%B6%E5%AD%90%E9%97%B4%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AE%EF%BC%9A"><span class="toc-number">1.5.4.5.</span> <span class="toc-text">5. 父子间直接访问：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-slot-%E6%8F%92%E6%A7%BD%EF%BC%9A"><span class="toc-number">1.5.4.6.</span> <span class="toc-text">6. slot 插槽：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-keep-alive%EF%BC%9A"><span class="toc-number">1.5.4.7.</span> <span class="toc-text">7. keep-alive：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-number">1.5.4.8.</span> <span class="toc-text">8. 组件生命周期函数：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE%EF%BC%9A"><span class="toc-number">1.5.4.8.1.</span> <span class="toc-text">1. 组件生命周期图：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.5.4.8.2.</span> <span class="toc-text">2. 组件生命周期方法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-nexTick-%EF%BC%9A"><span class="toc-number">1.5.4.8.3.</span> <span class="toc-text">3. $nexTick ：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Axios-%E4%B8%8E-Vue"><span class="toc-number">1.6.</span> <span class="toc-text">Axios 与 Vue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Vue-%E4%B8%AD%E4%BD%BF%E7%94%A8-Axios%EF%BC%9A"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. Vue 中使用 Axios：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Vue-%E5%B0%81%E8%A3%85-Axios-%E6%A8%A1%E6%9D%BF%EF%BC%9A"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. Vue 封装 Axios 模板：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VueRouter"><span class="toc-number">1.7.</span> <span class="toc-text">VueRouter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">1.7.1.</span> <span class="toc-text">1. 认识路由：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">1. 基础使用：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">2. 路由模式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%87%8D%E5%AE%9A%E5%90%91%E4%B8%8E%E5%88%AB%E5%90%8D%EF%BC%9A"><span class="toc-number">1.7.1.3.</span> <span class="toc-text">3. 重定向与别名：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-router-link%EF%BC%9A"><span class="toc-number">1.7.2.</span> <span class="toc-text">2. router-link：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">1.7.3.</span> <span class="toc-text">3. 嵌套路由：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%8E%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%EF%BC%9A"><span class="toc-number">1.7.4.</span> <span class="toc-text">4. 动态路由与参数传递：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-params-%E4%B8%8E-query-%E4%BC%A0%E5%8F%82%EF%BC%9A"><span class="toc-number">1.7.4.1.</span> <span class="toc-text">1. params 与 query 传参：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-props-%E4%BC%A0%E5%8F%82%EF%BC%9A"><span class="toc-number">1.7.4.2.</span> <span class="toc-text">2. props 传参：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB%EF%BC%9A"><span class="toc-number">1.7.5.</span> <span class="toc-text">5. 导航守卫：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%85%A8%E5%B1%80%E5%AE%88%E5%8D%AB%EF%BC%9A"><span class="toc-number">1.7.5.1.</span> <span class="toc-text">1. 全局守卫：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB%EF%BC%9A"><span class="toc-number">1.7.5.2.</span> <span class="toc-text">2. 路由守卫：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BB%84%E4%BB%B6%E5%AE%88%E5%8D%AB%EF%BC%9A"><span class="toc-number">1.7.5.3.</span> <span class="toc-text">3. 组件守卫：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AF%BC%E8%88%AA%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-number">1.7.5.4.</span> <span class="toc-text">4. 导航流程：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-keep-alive-%E4%B8%8E-transition%EF%BC%9A"><span class="toc-number">1.7.6.</span> <span class="toc-text">6. keep-alive 与 transition：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vuex"><span class="toc-number">1.8.</span> <span class="toc-text">Vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86-Vuex%EF%BC%9A"><span class="toc-number">1.8.1.</span> <span class="toc-text">1. 认识 Vuex：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">工作原理：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.8.1.2.</span> <span class="toc-text">引入方式：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-number">1.8.2.</span> <span class="toc-text">2.核心概念：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-State%EF%BC%88%E7%8A%B6%E6%80%81%EF%BC%89%EF%BC%9A"><span class="toc-number">1.8.2.1.</span> <span class="toc-text">1. State（状态）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Mutation%EF%BC%88%E6%94%B9%E5%8F%98%EF%BC%89"><span class="toc-number">1.8.2.2.</span> <span class="toc-text">2. Mutation（改变）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Getter%EF%BC%88%E5%B1%9E%E6%80%A7%EF%BC%89"><span class="toc-number">1.8.2.3.</span> <span class="toc-text">3. Getter（属性）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Action%EF%BC%88%E5%BC%82%E6%AD%A5%EF%BC%89"><span class="toc-number">1.8.2.4.</span> <span class="toc-text">4. Action（异步）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Module%EF%BC%88%E6%A8%A1%E5%9D%97%EF%BC%89"><span class="toc-number">1.8.2.5.</span> <span class="toc-text">5. Module（模块）:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Composition-API"><span class="toc-number">1.9.</span> <span class="toc-text">Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-setup%EF%BC%9A"><span class="toc-number">1.9.1.</span> <span class="toc-text">1. setup：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B8%B8%E7%94%A8-API%EF%BC%9A"><span class="toc-number">1.9.2.</span> <span class="toc-text">2. 常用 API：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-watch-%E4%B8%8E-watchEffect%EF%BC%9A"><span class="toc-number">1.9.3.</span> <span class="toc-text">3. watch 与 watchEffect：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9A"><span class="toc-number">1.9.4.</span> <span class="toc-text">4. 生命周期：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#nextTick%EF%BC%9A"><span class="toc-number">1.9.4.1.</span> <span class="toc-text">nextTick：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-provide-%E4%B8%8E-inject%EF%BC%9A"><span class="toc-number">1.9.5.</span> <span class="toc-text">5. provide 与 inject：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%80%89%E9%A1%B9%E5%BC%8F-API%EF%BC%9A"><span class="toc-number">1.9.5.1.</span> <span class="toc-text">1. 选项式 API：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%84%E5%90%88%E5%BC%8F-API%EF%BC%9A"><span class="toc-number">1.9.5.2.</span> <span class="toc-text">2. 组合式 API：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-VueRouter%EF%BC%9A"><span class="toc-number">1.9.6.</span> <span class="toc-text">6. VueRouter：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Vuex%EF%BC%9A"><span class="toc-number">1.9.7.</span> <span class="toc-text">7. Vuex：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vite-TS"><span class="toc-number">1.10.</span> <span class="toc-text">Vite + TS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%9A"><span class="toc-number">1.10.1.</span> <span class="toc-text">创建项目：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ref-%E5%85%A8%E5%AE%B6%E6%A1%B6%EF%BC%9A"><span class="toc-number">1.10.2.</span> <span class="toc-text">Ref 全家桶：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reactive-%E5%85%A8%E5%AE%B6%E6%A1%B6%EF%BC%9A"><span class="toc-number">1.10.3.</span> <span class="toc-text">Reactive 全家桶：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#To-%E5%85%A8%E5%AE%B6%E6%A1%B6%EF%BC%9A"><span class="toc-number">1.10.4.</span> <span class="toc-text">To 全家桶：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%EF%BC%9A"><span class="toc-number">1.10.5.</span> <span class="toc-text">computed：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#less%EF%BC%9A"><span class="toc-number">1.10.6.</span> <span class="toc-text">less：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC%EF%BC%9A"><span class="toc-number">1.10.7.</span> <span class="toc-text">组件传值：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90%EF%BC%9A"><span class="toc-number">1.10.7.1.</span> <span class="toc-text">父传子：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E4%BC%A0%E7%88%B6%EF%BC%9A"><span class="toc-number">1.10.7.2.</span> <span class="toc-text">子传父：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9A%B4%E9%9C%B2%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%EF%BC%9A"><span class="toc-number">1.10.7.3.</span> <span class="toc-text">暴露组件属性：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.10.7.4.</span> <span class="toc-text">递归组件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#v-model"><span class="toc-number">1.10.7.5.</span> <span class="toc-text">v-model:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.10.8.</span> <span class="toc-text">动态组件：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.10.8.1.</span> <span class="toc-text">使用方式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.10.8.2.</span> <span class="toc-text">异步组件：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#transition%EF%BC%9A"><span class="toc-number">1.10.9.</span> <span class="toc-text">transition：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.10.9.1.</span> <span class="toc-text">基础使用：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#animate-css%EF%BC%9A"><span class="toc-number">1.10.9.2.</span> <span class="toc-text">animate.css：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9A"><span class="toc-number">1.10.9.3.</span> <span class="toc-text">生命周期：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#appear%EF%BC%9A"><span class="toc-number">1.10.9.4.</span> <span class="toc-text">appear：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TransitionGroup%EF%BC%9A"><span class="toc-number">1.10.9.5.</span> <span class="toc-text">TransitionGroup：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gsap-js%EF%BC%9A"><span class="toc-number">1.10.9.6.</span> <span class="toc-text">gsap.js：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mitt"><span class="toc-number">1.10.10.</span> <span class="toc-text">Mitt:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unplugin-auto-import%EF%BC%9A"><span class="toc-number">1.10.11.</span> <span class="toc-text">unplugin-auto-import：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">1.10.12.</span> <span class="toc-text">自定义指令:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hooks%EF%BC%9A"><span class="toc-number">1.10.13.</span> <span class="toc-text">Hooks：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Mixins"><span class="toc-number">1.10.13.1.</span> <span class="toc-text">Mixins:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hooks%EF%BC%9A-1"><span class="toc-number">1.10.13.2.</span> <span class="toc-text">Hooks：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">1.10.14.</span> <span class="toc-text">定义全局变量：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue2%EF%BC%9A"><span class="toc-number">1.10.14.1.</span> <span class="toc-text">vue2：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue3%EF%BC%9A"><span class="toc-number">1.10.14.2.</span> <span class="toc-text">vue3：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E7%A9%BF%E9%80%8F%EF%BC%9A"><span class="toc-number">1.10.15.</span> <span class="toc-text">样式穿透：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pinia"><span class="toc-number">1.11.</span> <span class="toc-text">Pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.11.1.</span> <span class="toc-text">安装使用：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#state"><span class="toc-number">1.11.2.</span> <span class="toc-text">state:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%9B%B4%E6%8E%A5%E4%BF%AE%E6%94%B9%EF%BC%9A"><span class="toc-number">1.11.2.1.</span> <span class="toc-text">1. 直接修改：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-patch%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89%EF%BC%9A"><span class="toc-number">1.11.2.2.</span> <span class="toc-text">2. $patch（推荐）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-state%EF%BC%9A"><span class="toc-number">1.11.2.3.</span> <span class="toc-text">3. $state：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-actions%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89%EF%BC%9A"><span class="toc-number">1.11.2.4.</span> <span class="toc-text">4. actions（推荐）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-storeToRefs%EF%BC%9A"><span class="toc-number">1.11.2.5.</span> <span class="toc-text">5. storeToRefs：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getters%E3%80%81actions%EF%BC%9A"><span class="toc-number">1.11.3.</span> <span class="toc-text">getters、actions：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API%EF%BC%9A"><span class="toc-number">1.11.4.</span> <span class="toc-text">API：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#reset%EF%BC%9A"><span class="toc-number">1.11.4.1.</span> <span class="toc-text">$reset：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#subscribe%EF%BC%9A"><span class="toc-number">1.11.4.2.</span> <span class="toc-text">$subscribe：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onAction%EF%BC%9A"><span class="toc-number">1.11.4.3.</span> <span class="toc-text">$onAction：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8%EF%BC%9A"><span class="toc-number">1.11.5.</span> <span class="toc-text">持久化存储：</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/29/java/springboot/SpringSecurity/" title="SpringSecurity"><img src="https://www.ruoxijun.top/getRandomImageR2?_r_=50921c90-c577-0c73-1e9f-153cc3a425ca" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringSecurity"/></a><div class="content"><a class="title" href="/2023/04/29/java/springboot/SpringSecurity/" title="SpringSecurity">SpringSecurity</a><time datetime="2023-04-29T02:10:14.000Z" title="Created 2023-04-29 10:10:14">2023-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/29/java/springboot/mybatisplus/" title="MyBatis-Plus"><img src="https://www.ruoxijun.top/getRandomImageR2?_r_=6fef2cb2-2e14-a532-192e-39ff78f9ed3a" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MyBatis-Plus"/></a><div class="content"><a class="title" href="/2023/04/29/java/springboot/mybatisplus/" title="MyBatis-Plus">MyBatis-Plus</a><time datetime="2023-04-29T02:10:14.000Z" title="Created 2023-04-29 10:10:14">2023-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/20/interest/Arduino/" title="Arduino"><img src="https://www.ruoxijun.top/getRandomImageR2?_r_=5d562a5c-0dc6-79ed-67b4-3cee595a5d41" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Arduino"/></a><div class="content"><a class="title" href="/2023/04/20/interest/Arduino/" title="Arduino">Arduino</a><time datetime="2023-04-20T12:43:00.000Z" title="Created 2023-04-20 20:43:00">2023-04-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/15/interest/Termux/" title="ZeroTermux"><img src="https://www.ruoxijun.top/getRandomImageR2?_r_=1fca17e0-a5e1-1bfb-5439-2e85a92c0268" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ZeroTermux"/></a><div class="content"><a class="title" href="/2023/04/15/interest/Termux/" title="ZeroTermux">ZeroTermux</a><time datetime="2023-04-15T12:45:00.000Z" title="Created 2023-04-15 20:45:00">2023-04-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/02/interest/%E4%BA%91%E5%8E%9F%E7%94%9F/" title="云原生"><img src="https://www.ruoxijun.top/getRandomImageR2?_r_=a7fb4d43-d179-dd02-fce2-3495ecb01da8" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云原生"/></a><div class="content"><a class="title" href="/2023/04/02/interest/%E4%BA%91%E5%8E%9F%E7%94%9F/" title="云原生">云原生</a><time datetime="2023-04-02T02:04:00.000Z" title="Created 2023-04-02 10:04:00">2023-04-02</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src="https://bu.dusays.com/2021/01/15/078d1936ddf32.png" alt="大佬带我~" title="大佬带我~"/><div id="runtimeTextTip"></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="ruoxijun" target="_blank">ruoxijun</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" href="https://ruoxijun.top/" title="湘ICP备-不备案号">湘ICP备-不备案号</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">48</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">117</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://ruoxijun.top/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="https://ruoxijun.top/" title="其它"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="其它"/><span class="back-menu-item-text">其它</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> Article</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-box-archive"></use></svg><span> Tunnel</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shapes"></use></svg><span> Classification</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg><span> Label</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> Friend</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link"></use></svg><span> Friends account</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-artstation"></use></svg><span> Moments</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-envelope"></use></svg><span> Message board</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> My</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-music"></use></svg><span> Music Hall</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg><span> Chasing</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-images"></use></svg><span> Album Set</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fan"></use></svg><span> Conditioning</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg><span> About</span></a></div></div><span class="sidebar-menu-item-title">标签</span></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("04/01/2021 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://bu.dusays.com/2021/01/15/078d1936ddf32.png";
        img.title = "嘿嘿~";
        img.alt = "嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'http://43.142.114.172:8080/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'http://43.142.114.172:8080/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><script>(() => {
  const initWaline = () => {
    const waline = Waline.init(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://blog-waline-b3qy7x4i1-ruoxijun.vercel.app/',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: true,
    }, {"pageSize":10,"requiredMeta":["nick","mail"],"login":"enable","copyright":true,"locale":{"admin":"若惜君","sofa":"好像什么都没有诶~~~","placeholder":"悄悄的说句话~~~"}}))
  }

  const loadWaline = async () => {
    if (typeof Waline === 'object') initWaline()
    else {
      await getCSS('https://cdn.cbd.int/@waline/client@2.15.5/dist/waline.css')
      await getScript('https://cdn.cbd.int/@waline/client@2.15.5/dist/waline.js')
      initWaline()
    }
  }

  if ('Twikoo' === 'Waline' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'http://43.142.114.172:8080/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "Unable to get the data, please make sure the settings are correct."
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-7JZFCVWT7S', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>